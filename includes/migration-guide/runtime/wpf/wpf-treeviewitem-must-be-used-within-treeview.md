### <a name="wpf-treeviewitem-must-be-used-within-a-treeview"></a>WPF TreeViewItem devem ser usado dentro de um modo de exibição de árvore

|   |   |
|---|---|
|Detalhes|Uma alteração foi introduzida no 4.5 que restringe o uso de <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> elementos fora de um <xref:System.Windows.Controls.TreeView?displayProperty=name>. Isso se manifesta sob as seguintes condições:<ul><li><xref:System.Windows.Controls.TreeViewItem?displayProperty=name>do visual pai não é um panel. (Um <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> gerado para um <xref:System.Windows.Controls.TreeView?displayProperty=name> terá um painel, como seu pai)</li><li>O <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> for um descendente de um <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=name> atuando como o &quot;itens host&quot; para um controle de lista (caixa de listagem, DataGrid, ListView, etc.). A virtualização não precisa ser habilitada.</li><li>O <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=name> é o item de rolagem (<code>ScrollUnit=&quot;Item&quot;</code>).</li><li>Alguém chama <code>VirtualizingStackPanel.MakeVisible(v)</code> para rolar um elemento <code>v</code> no modo de exibição. Isso pode ser feito explícita ou implicitamente de várias maneiras; talvez a maneira mais comum seja simplesmente clicar em <code>v</code> para fornecer a ele o foco do teclado.</li><li>A cadeia de visual pai de <code>v</code> para o <xref:System.Windows.Controls.VirtualizingStackPanel?displayProperty=name> transmite o <xref:System.Windows.Controls.TreeViewItem?displayProperty=name>.</li></ul>Em outras palavras, isso é visto quando um <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> é usada fora de um <xref:System.Windows.Controls.TreeView?displayProperty=name>, e o usuário clica em um descendente do <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> para colocá-lo no modo de exibição. Se o <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> não tem controle descendentes, você nunca verá esse problema. Um exemplo de uma situação em que isso é alcançado é quando um <xref:System.Windows.Controls.TreeViewItem?displayProperty=name> é a raiz de um DataTemplate. Quando esse problema for atingido, haverá uma InvalidCastException que ocorrerá dentro da estrutura do WPF.|
|Sugestão|Um hotfix será disponibilizado para isso.|
|Escopo|Secundário|
|Versão|4.5|
|Tipo|Tempo de execução|

