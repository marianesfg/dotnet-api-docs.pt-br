### <a name="horizontal-scrolling-and-virtualization"></a>Rolagem horizontal e virtualização

|   |   |
|---|---|
|Detalhes|Essa alteração se aplica a um <xref:System.Windows.Controls.ItemsControl?displayProperty=name> que faz sua própria virtualização na direção ortogonal para a direção de rolagem principal (o principal exemplo é <xref:System.Windows.Controls.DataGrid?displayProperty=name> com EnableColumnVirtualization=&quot;True&quot;).  O resultado de determinadas operações de rolagem horizontal foi alterado para produzir resultados mais intuitivos e mais semelhantes aos resultados de operações verticais comparáveis. As operações incluem &quot;Rolagem Aqui&quot; e &quot;Borda Direita&quot;, para usar os nomes do menu obtido clicando com o botão direito do mouse em uma barra de rolagem horizontal.  Ambas calculam um deslocamento do candidato e chamam <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>. Depois de rolar para o novo deslocamento, a noção de &quot;aqui&quot; ou &quot;borda direita&quot; pode ser alterada porque o conteúdo com a virtualização eliminada recentemente pode ter alterado o valor de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>. Antes do .Net 4.6.2, a operação de rolagem simplesmente usava o deslocamento do candidato, mesmo que ele talvez não fosse mais &quot;aqui&quot; ou &quot;borda direita&quot;.  Isso resulta em efeitos como o &quot;salto&quot; de rolagem, melhor ilustrado pelo exemplo. Suponha que um <xref:System.Windows.Controls.DataGrid?displayProperty=name> tenha ExtentWidth = 1000 e Width = 200.  Uma rolagem para &quot;Borda Direita&quot; usa o deslocamento de candidato 1000-200 = 800.  Durante a rolagem até esse deslocamento, a virtualização de novas colunas é eliminada. Vamos supor que elas sejam muito largas, então o <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> muda para 2000.  A rolagem termina com HorizontalOffset = 800 e o elevador &quot;salta&quot; para próximo ao meio da barra de rolagem – precisamente em 800/2000 = 40%. A alteração recompila um novo deslocamento de candidato quando essa situação ocorre e tenta novamente. (A rolagem vertical já funciona assim.) A alteração proporciona uma experiência mais previsível e intuitiva para o usuário final, mas também pode afetar qualquer aplicativo que dependa do valor exato de <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> após uma rolagem horizontal, seja ela invocada pelo usuário final ou por uma chamada explícita para <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset(System.Double)>.|
|Sugestão|Um aplicativo que usa um valor previsto para <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset?displayProperty=name> deve ser alterado para obter o valor real (e o valor de <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name>) após qualquer rolagem horizontal que poderia alterar <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth?displayProperty=name> devido à eliminação da virtualização.|
|Escopo|Secundário|
|Versão|4.6.2|
|Tipo|Tempo de execução|
|APIs afetadas|<ul><li><xref:System.Windows.Controls.Primitives.IScrollInfo?displayProperty=nameWithType></li></ul>|

