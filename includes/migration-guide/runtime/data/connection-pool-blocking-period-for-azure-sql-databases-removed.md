### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a>Pool de Conexão, bloqueando período para bancos de dados do SQL Azure é removido

|   |   |
|---|---|
|Detalhes|Iniciando com o .NET Framework 4.6.2, para conexão abrir solicitações para bancos de dados SQL do Azure conhecidos (*. t, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), o pool de conexão é o período de bloqueio removido, e erros de abertura de conexão não são armazenados em cache. As tentativas de repetir as solicitações de abertura de conexão ocorrerão quase que imediatamente após os erros de conexão transitórios. Essa alteração permite que a tentativa de conexão aberta ser repetida imediatamente para bancos de dados do SQL Azure, melhorando o desempenho de aplicativos de nuvem-habilitado. Para todas as outras tentativas de conexão, o período de bloqueio de pool de conexão continuará a ser imposta. No .NET Framework 4.6.1 e versões anteriores, quando um aplicativo encontra uma falha de conexão transitória ao se conectar a um banco de dados, a tentativa de conexão não pode ser repetida rapidamente, porque o pool de conexão armazena em cache o erro e gera novamente por 5 segundos para 1 minuto. Para obter mais informações, consulte [Pooling de Conexão do SQL Server (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md). Esse comportamento é problemático para conexões com bancos de dados SQL do Azure que, muitas vezes, falham com erros transitórios que normalmente são recuperados em alguns segundos. O recurso de bloqueio de pool de conexão significa que o aplicativo não pode se conectar ao banco de dados por um período extenso, mesmo que o banco de dados está disponível e o aplicativo precisa processar dentro de alguns segundos.|
|Sugestão|Se esse comportamento é desejável, o período de bloqueio de pool de conexão pode ser configurado definindo o <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> propriedade introduzida no .NET Framework 4.6.2. O valor da propriedade é membro da enumeração <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> que pode assumir um dos três valores:<ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul>É possível restaurar o comportamento anterior definindo a propriedade <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> como <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.|
|Escopo|Secundário|
|Versão|4.6.2|
|Tipo|Tempo de execução|
|APIs afetadas|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

