### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="93a37-101">CspParameters.ParentWindowHandle agora espera o valor HWND</span><span class="sxs-lookup"><span data-stu-id="93a37-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="93a37-102">Detalhes</span><span class="sxs-lookup"><span data-stu-id="93a37-102">Details</span></span>|<span data-ttu-id="93a37-103">O <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valor, introduzida no .NET Framework 2.0, permite que um aplicativo registrar um valor de identificador de janela pai, de modo que qualquer interface de usuário necessárias para acessar a chave (como um PIN solicitar ou caixa de diálogo de consentimento) é aberto como um filho modal para a janela especificada. Um aplicativo Windows Forms a partir do aplicativos para o .NET Framework 4.7, pode definir o <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propriedade com o código como o seguinte:</span><span class="sxs-lookup"><span data-stu-id="93a37-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="93a37-104">Nas versões anteriores do .NET Framework, o valor era esperado para ser um <xref:System.IntPtr?displayProperty=name> que representa um local na memória em que o [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valor residia.</span><span class="sxs-lookup"><span data-stu-id="93a37-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="93a37-105">Definindo a propriedade para o formulário. Manipular no Windows 7 e versões anteriores não tinham nenhum efeito, mas no Windows 8 e versões posteriores, o resultado será um &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: O parâmetro está incorreto.&quot;</span><span class="sxs-lookup"><span data-stu-id="93a37-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="93a37-106">Sugestão</span><span class="sxs-lookup"><span data-stu-id="93a37-106">Suggestion</span></span>|<span data-ttu-id="93a37-107">Aplicativos de direcionamento 4.7 .NET ou superior desejam registrar uma relação de janela pai são incentivados a usar a forma simplificada:</span><span class="sxs-lookup"><span data-stu-id="93a37-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="93a37-108">Os usuários que identificaram o valor correto para passar foi o endereço de um local de memória que o valor de mantida <code>form.Handle</code> pode recusar a alteração de comportamento, definindo a opção AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> para <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="93a37-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="93a37-109">Configurando programaticamente compat switches em AppContext, conforme explicado [aqui](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="93a37-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="93a37-110">Adicionando a seguinte linha na seção <code>&lt;runtime&gt;</code> do arquivo app.config:</span><span class="sxs-lookup"><span data-stu-id="93a37-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="93a37-111">Por outro lado, os usuários que desejarem para aceitar o novo comportamento em tempo de execução do .NET Framework 4.7 quando o aplicativo será carregado em versões mais antigas do .NET Framework pode definir o AppContext alternam para <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="93a37-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="93a37-112">Escopo</span><span class="sxs-lookup"><span data-stu-id="93a37-112">Scope</span></span>|<span data-ttu-id="93a37-113">Secundário</span><span class="sxs-lookup"><span data-stu-id="93a37-113">Minor</span></span>|
|<span data-ttu-id="93a37-114">Versão</span><span class="sxs-lookup"><span data-stu-id="93a37-114">Version</span></span>|<span data-ttu-id="93a37-115">4.7</span><span class="sxs-lookup"><span data-stu-id="93a37-115">4.7</span></span>|
|<span data-ttu-id="93a37-116">Tipo</span><span class="sxs-lookup"><span data-stu-id="93a37-116">Type</span></span>|<span data-ttu-id="93a37-117">Redirecionando</span><span class="sxs-lookup"><span data-stu-id="93a37-117">Retargeting</span></span>|
|<span data-ttu-id="93a37-118">APIs afetadas</span><span class="sxs-lookup"><span data-stu-id="93a37-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

