### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a>CspParameters.ParentWindowHandle agora espera o valor HWND

|   |   |
|---|---|
|Detalhes|O <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> valor, introduzida no .NET Framework 2.0, permite que um aplicativo registrar um valor de identificador de janela pai, de modo que qualquer interface de usuário necessárias para acessar a chave (como um PIN solicitar ou caixa de diálogo de consentimento) é aberto como um filho modal para a janela especificada. Um aplicativo Windows Forms a partir do aplicativos para o .NET Framework 4.7, pode definir o <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> propriedade com o código como o seguinte:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Nas versões anteriores do .NET Framework, o valor era esperado para ser um <xref:System.IntPtr?displayProperty=name> que representa um local na memória em que o [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) valor residia. Definindo a propriedade para o formulário. Manipular no Windows 7 e versões anteriores não tinham nenhum efeito, mas no Windows 8 e versões posteriores, o resultado será um &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: O parâmetro está incorreto.&quot;|
|Sugestão|Aplicativos de direcionamento 4.7 .NET ou superior desejam registrar uma relação de janela pai são incentivados a usar a forma simplificada:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Os usuários que identificaram o valor correto para passar foi o endereço de um local de memória que o valor de mantida <code>form.Handle</code> pode recusar a alteração de comportamento, definindo a opção AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> para <code>true</code>.<ol><li>Configurando programaticamente compat switches em AppContext, conforme explicado [aqui](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</li><li>Adicionando a seguinte linha na seção <code>&lt;runtime&gt;</code> do arquivo app.config:</li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Por outro lado, os usuários que desejarem para aceitar o novo comportamento em tempo de execução do .NET Framework 4.7 quando o aplicativo será carregado em versões mais antigas do .NET Framework pode definir o AppContext alternam para <code>false</code>.|
|Escopo|Secundário|
|Versão|4.7|
|Tipo|Redirecionando|
|APIs afetadas|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

