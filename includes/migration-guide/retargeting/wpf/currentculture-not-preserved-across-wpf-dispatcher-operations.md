### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a>CurrentCulture não é preservado em operações de Dispatcher do WPF

|   |   |
|---|---|
|Detalhes|A partir do .NET Framework 4.6, alterações em <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> feita dentro de uma <xref:System.Windows.Threading.Dispatcher?displayProperty=name> serão perdidas no final da operação dispatcher. Da mesma forma, é alterado para <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> feitas fora do distribuidor de um operação pode não ser refletida quando operação é executada. Termos práticos, isso significa que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> alterações não podem fluir entre retornos de chamada do WPF UI e outro código em um aplicativo WPF. Isso ocorre devido a uma alteração no <xref:System.Threading.ExecutionContext?displayProperty=name> que faz com que <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> para ser armazenado no início de contexto de execução com aplicativos voltados para o .NET Framework 4.6. As operações de dispatcher do WPF armazenam o contexto de execução usado para começar a operação e restaurar o contexto anterior quando a operação é concluída. Como <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> agora fazem parte desse contexto, alterações nelas em uma operação de dispatcher não são persistidas fora da operação.|
|Sugestão|Aplicativos afetados por essa alteração podem funcionar ao redor dele, armazenando o desejado <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> ou <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> em um campo e o check-in de todos os corpos de operação de Dispatcher (incluindo manipuladores de retorno de chamada de eventos de interface do usuário) que corretas <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> e <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> são definidos. Como alternativa, porque o ExecutionContext alterar subjacente essa alteração WPF afeta somente os aplicativos voltados para o .NET Framework 4.6 ou posterior, essa interrupção pode ser evitada direcionando o 4.5.2.Apps do .NET Framework de destino do .NET Framework 4.6 ou posterior, também pode funcionar isso definindo a compatibilidade a seguinte opção:<pre><code>AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre>Esse problema foi corrigido pelo WPF no .NET Framework 4.6.2. Ele também foi corrigido no .NET Frameworks 4.6 e 4.6.1 por meio de [3139549 KB](https://support.microsoft.com/kb/3139549). Aplicativos voltados para o .NET 4.6 ou posterior receberá automaticamente o comportamento correto em aplicativos WPF - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) poderiam ser preservados entre operações de Dispatcher.|
|Escopo|Secundário|
|Versão|4.6|
|Tipo|Redirecionando|

