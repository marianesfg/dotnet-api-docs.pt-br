### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Alocação de grade do WPF do espaço para as colunas de estrela

|   |   |
|---|---|
|Detalhes|O .NET Framework 4.7, WPF substitui o algoritmo que <xref:System.Windows.Controls.Grid> usa ao alocar espaço para *-colunas. Isso alterará a largura real atribuída a *-colunas em um número de casos:<ul><li>Quando um ou mais *-as colunas também têm uma largura mínima ou máxima que substitui a alocação proporcional para essa coluna. (A largura mínima pode derivar de uma declaração explícita de MinWidth ou de um mínimo obtido do conteúdo da coluna. A largura máxima só pode ser definida explicitamente, de uma declaração MaxWidth.)</li><li>Quando um ou mais *-colunas declarar extremamente grandes *-peso, maior que 10 ^ 298.</li><li>Quando o *-peso é suficientemente diferente para encontrar instabilidade de ponto flutuante (estouro, estouro negativo, perda de precisão).</li><li>Quando o arredondamento de layout está habilitado e o DPI de exibição efetivo é suficientemente alto.</li></ul>Nos dois primeiros casos, as larguras produzidas pelo novo algoritmo podem ser significativamente diferentes daquelas produzido pelo algoritmo antigo; no último caso, a diferença será no máximo um ou dois pixels. O novo algoritmo corrige vários bugs presentes no algoritmo antigo:<ol><li>A alocação total de colunas pode exceder a largura da grade. Isso pode ocorrer ao alocar espaço para uma coluna cujo compartilhamento proporcional seja menor que seu tamanho mínimo. O algoritmo aloca o tamanho mínimo, o que reduz o espaço disponível para outras colunas. Se não houver nenhum *-colunas à esquerda para alocar, a alocação total será muito grande.</li><li>A alocação total pode ser menor que a largura da grade. Esse é o problema duplo para #1, decorrentes ao alocar a uma coluna cujo proporcional compartilhamento é maior do que seu tamanho máximo, sem nenhum *-colunas à esquerda para a margem de atraso.</li><li>Dois *-colunas podem receber alocações não de acordo com seus *-pesos. Esta é uma versão atenuada da n° 1 e da n° 2, que surge ao alocar para colunas de * A, B e C (nessa ordem), quando o compartilhamento proporcional de B viola sua restrição mínima (ou máxima). Como acima, isso altera o espaço disponível para a coluna C, que obtém menos (ou mais) alocação proporcional do que A.</li><li>Colunas com pesos muito grandes (&gt; 10 ^ 298) são tratados como se tivessem o peso de 10 ^ 298. Não são consideradas as diferenças proporcionais entre elas (e entre colunas com pesos um pouco menores).</li><li>Colunas com pesos inifinte não estão sendo tratadas corretamente. (Na verdade, você não pode definir um peso para infinito, mas essa é uma restrição artificial. O código de alocação tentou lidar com isso, mas não teve muito sucesso.)</li><li>Vários problemas menores, evitando estouro, estouro negativo, perda de precisão e problemas de ponto flutuante semelhantes.</li><li>Os ajustes de arredondamento de layout são incorretos em um DPI suficientemente alto.</li></ol>O novo algoritmo produz resultados que atendam a critérios: A seguir. A largura real atribuída a um *-coluna nunca é menor que sua largura mínima nem maior que a largura máxima. B. Cada <em>-coluna que não é atribuída a seu mínimo ou largura máxima é atribuída a uma largura proporcional à sua <em>-peso. Para ser preciso, se duas colunas são declaradas com largura x</em> e y</em> respectivamente, e se nenhuma coluna recebe sua largura mínima ou máxima, o v larguras real e w atribuídas às colunas na mesma proporção: v / w = = x / y.C. A largura total alocada para &quot;proporcional&quot; *-colunas é igual ao espaço disponível depois de alocar para colunas restritas (fixo, automaticamente, e *-colunas que estão alocados sua largura mínimo ou máximo). Isso pode ser zero, por exemplo se a soma das larguras mínimas excede a largura de availbable da grade. D. Todas essas instruções são para serem interpretados com relação ao &quot;ideal&quot; layout. Quando o arredondamento de layout está em vigor, as larguras reais podem diferir das larguras ideais tanto quanto um pixel. O algoritmo antigo cumprido (A), mas não pôde honrar outros critérios nos casos descritos acima. Tudo falou sobre colunas e larguras neste artigo se aplica também a linhas e alturas.|
|Sugestão|Por padrão, os aplicativos que as versões de destino do .NET Framework, começando com o .NET Framework 4.7 verão o novo algoritmo, enquanto os aplicativos que o destino do .NET Framework 4.6.2 ou versões anteriores verão o algoritmo antigo. Para substituir o padrão, use a seguinte configuração:<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>O valor 'true' seleciona o algoritmo antigo, 'false' seleciona o novo algoritmo.|
|Escopo|Secundário|
|Versão|4.7|
|Tipo|Redirecionando|

