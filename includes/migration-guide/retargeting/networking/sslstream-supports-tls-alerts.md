### <a name="sslstream-supports-tls-alerts"></a>SslStream dá suporte a TLS alertas

|   |   |
|---|---|
|Detalhes|Após um handshake TLS com falha, uma <xref:System.IO.IOException?displayProperty=name> com uma interna <xref:System.ComponentModel.Win32Exception?displayProperty=name> exceção será lançada pela primeira operação de e/s de leitura/gravação. O <xref:System.ComponentModel.Win32Exception.NativeErrorCode?displayProperty=name> de código para o <xref:System.ComponentModel.Win32Exception?displayProperty=name> pode ser mapeado para o alerta de TLS do participante remoto usando esse [Schannel documentação](https://msdn.microsoft.com/library/windows/desktop/dd721886%28v=vs.85%29.aspx). Para obter mais informações, consulte [RFC 2246: alertas de erro da seção 7.2.2](https://tools.ietf.org/html/rfc2246#section-7.2.2)o comportamento no .NET 4.6.2 e abaixo é que o canal de transporte (normalmente a conexão de TCP) atingirá o tempo limite durante a gravação ou leitura se outra falha de handshake e imediatamente depois rejeitou a conexão.|
|Sugestão|Aplicativos que chamam I/O APIs de rede, como <xref:System.IO.Stream.Read(System.Byte[],System.Int32,System.Int32)> / <xref:System.IO.Stream.Write(System.Byte[],System.Int32,System.Int32)> deve tratar <xref:System.IO.IOException> ou <xref:System.TimeoutException?displayProperty=name>. O recurso de alertas de TLS é habilitado por padrão, iniciando com o .NET 4.7. Aplicativos voltados para o .NET 4.0 - .NET 4.6.2 em execução no .NET 4.7 ou sistema superior terá o recurso desativado para preservar a compatibilidade. A seguinte configuração API está disponível para habilitar ou desabilitar o recurso para o .NET 4.6 e superior aplicativos em execução no .NET 4.7 ou framework superior.<ul><li>Programaticamente:</li></ul>Deve ser a primeira coisa que o aplicativo faz desde ServicePointManager inicializar apenas uma vez:<pre><code class="language-C#">AppContext.SetSwitch(&quot;TestSwitch.LocalAppContext.DisableCaching&quot;, true);&#13;&#10;AppContext.SetSwitch(&quot;Switch.System.Net.DontEnableTlsAlerts&quot;, true); // Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2.&#13;&#10;</code></pre><ul><li>AppConfig:</li></ul><pre><code class="language-XML">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Net.DontEnableTlsAlerts=true&quot;/&gt;&#13;&#10;&lt;!-- Set to &#39;false&#39; to enable the feature in .NET 4.6 - 4.6.2. --&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><ul><li>Chave do registro (máquina global):</li></ul>Defina o valor como 'false' para habilitar o recurso do .NET 4.6 - 4.6.2.<pre><code>Key = HKLM\SOFTWARE\[Wow6432Node\]Microsoft\.NETFramework\AppContext\Switch.System.Net.DontEnableTlsAlerts&#13;&#10;Type = String&#13;&#10;Value = &quot;true&quot;&#13;&#10;</code></pre>|
|Escopo|Microsoft Edge|
|Versão|4.7|
|Tipo|Redirecionando|
|APIs afetadas|<ul><li><xref:System.Net.Security.SslStream?displayProperty=nameWithType></li><li><xref:System.Net.WebRequest?displayProperty=nameWithType></li><li><xref:System.Net.HttpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.FtpWebRequest?displayProperty=nameWithType></li><li><xref:System.Net.Mail.SmtpClient?displayProperty=nameWithType></li><li><xref:System.Net.Http?displayProperty=nameWithType></li></ul>|

