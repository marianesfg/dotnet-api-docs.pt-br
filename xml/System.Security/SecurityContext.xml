<Type Name="SecurityContext" FullName="System.Security.SecurityContext">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="19deaf58cc4ef80ad473aaa036612750728c0284" />
    <Meta Name="ms.sourcegitcommit" Value="d31dc2ede16f6f7bc64e90d9f897ff54c4e3869b" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="pt-BR" />
    <Meta Name="ms.lasthandoff" Value="04/03/2018" />
    <Meta Name="ms.locfileid" Value="30500880" />
  </Metadata>
  <TypeSignature Language="C#" Value="public sealed class SecurityContext : IDisposable" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi sealed beforefieldinit SecurityContext extends System.Object implements class System.IDisposable" />
  <TypeSignature Language="DocId" Value="T:System.Security.SecurityContext" />
  <TypeSignature Language="VB.NET" Value="Public NotInheritable Class SecurityContext&#xA;Implements IDisposable" />
  <TypeSignature Language="C++ CLI" Value="public ref class SecurityContext sealed : IDisposable" />
  <AssemblyInfo>
    <AssemblyName>mscorlib</AssemblyName>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Security.Permissions</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Object</BaseTypeName>
  </Base>
  <Interfaces>
    <Interface>
      <InterfaceName>System.IDisposable</InterfaceName>
    </Interface>
  </Interfaces>
  <Docs>
    <summary>
      <span data-ttu-id="75bdc-101">Encapsula e propaga todos os dados relacionados à segurança para contextos de execução transferidos entre threads.</span>
      <span class="sxs-lookup">
        <span data-stu-id="75bdc-101">Encapsulates and propagates all security-related data for execution contexts transferred across threads.</span>
      </span>
      <span data-ttu-id="75bdc-102">Essa classe não pode ser herdada.</span>
      <span class="sxs-lookup">
        <span data-stu-id="75bdc-102">This class cannot be inherited.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-103">Um <xref:System.Security.SecurityContext> objeto captura todas as informações relacionadas à segurança para um segmento lógico, incluindo as informações contidas no <xref:System.Security.Principal.WindowsIdentity> e <xref:System.Threading.CompressedStack> objetos.</span><span class="sxs-lookup"><span data-stu-id="75bdc-103">A <xref:System.Security.SecurityContext> object captures all security-related information for a logical thread, including the information contained in the <xref:System.Security.Principal.WindowsIdentity> and <xref:System.Threading.CompressedStack> objects.</span></span>  <span data-ttu-id="75bdc-104">Essa configuração permite que a identidade do Windows e os elementos de segurança na pilha sejam propagadas automaticamente quando o <xref:System.Security.SecurityContext> é copiado e transferidos entre threads assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-104">This configuration allows the Windows identity and the security elements on the stack to be propagated automatically when the <xref:System.Security.SecurityContext> is copied and transferred across asynchronous threads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="75bdc-105">O common language runtime (CLR) está ciente das operações executadas usando somente código gerenciado, não de representação executada fora do código gerenciado, como por meio da plataforma chamar código não gerenciado ou por meio de chamadas diretas para funções do Win32 de representação.</span><span class="sxs-lookup"><span data-stu-id="75bdc-105">The common language runtime (CLR) is aware of impersonation operations performed using only managed code, not of impersonation performed outside of managed code, such as through platform invoke to unmanaged code or through direct calls to Win32 functions.</span></span> <span data-ttu-id="75bdc-106">Somente gerenciado <xref:System.Security.Principal.WindowsIdentity> objetos possam fluir entre pontos assíncronos, a menos que o `alwaysFlowImpersonationPolicy` elemento foi definido como `true` (`<alwaysFlowImpersonationPolicy enabled="true"/>`).</span><span class="sxs-lookup"><span data-stu-id="75bdc-106">Only managed <xref:System.Security.Principal.WindowsIdentity> objects can flow across asynchronous points, unless the `alwaysFlowImpersonationPolicy` element has been set to `true` (`<alwaysFlowImpersonationPolicy enabled="true"/>`).</span></span> <span data-ttu-id="75bdc-107">Definindo o `alwaysFlowImpersonationPolicy` elemento `true` Especifica que a identidade do Windows sempre flui pelos pontos assíncronos, independentemente de como a representação foi executada.</span><span class="sxs-lookup"><span data-stu-id="75bdc-107">Setting the `alwaysFlowImpersonationPolicy` element to `true` specifies that the Windows identity always flows across asynchronous points, regardless of how impersonation was performed.</span></span> <span data-ttu-id="75bdc-108">Para obter mais informações sobre o fluxo não gerenciado a representação pelos pontos assíncronos, consulte [ &lt;alwaysFlowImpersonationPolicy&gt; elemento](~/docs/framework/configure-apps/file-schema/runtime/alwaysflowimpersonationpolicy-element.md).</span><span class="sxs-lookup"><span data-stu-id="75bdc-108">For more information about flowing unmanaged impersonation across asynchronous points, see [&lt;alwaysFlowImpersonationPolicy&gt; Element](~/docs/framework/configure-apps/file-schema/runtime/alwaysflowimpersonationpolicy-element.md).</span></span>  
  
 <span data-ttu-id="75bdc-109">O <xref:System.Security.SecurityContext> é parte do maior <xref:System.Threading.ExecutionContext> e fluxos ou migra quando o <xref:System.Threading.ExecutionContext> fluxos ou migra.</span><span class="sxs-lookup"><span data-stu-id="75bdc-109">The <xref:System.Security.SecurityContext> is part of the larger <xref:System.Threading.ExecutionContext> and flows or migrates when the <xref:System.Threading.ExecutionContext> flows or migrates.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="75bdc-110">Este tipo implementa o <xref:System.IDisposable> interface.</span><span class="sxs-lookup"><span data-stu-id="75bdc-110">This type implements the <xref:System.IDisposable> interface.</span></span> <span data-ttu-id="75bdc-111">Quando você terminar de usar o tipo, descarte-direta ou indiretamente.</span><span class="sxs-lookup"><span data-stu-id="75bdc-111">When you have finished using the type, you should dispose of it either directly or indirectly.</span></span> <span data-ttu-id="75bdc-112">Para descartar o tipo diretamente, chame seu <xref:System.IDisposable.Dispose%2A> método em um `try` / `catch` bloco.</span><span class="sxs-lookup"><span data-stu-id="75bdc-112">To dispose of the type directly, call its <xref:System.IDisposable.Dispose%2A> method in a `try`/`catch` block.</span></span> <span data-ttu-id="75bdc-113">Para descartar indiretamente dele, use uma construção de linguagem, como `using` (em c#) ou `Using` (no Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="75bdc-113">To dispose of it indirectly, use a language construct such as `using` (in C#) or `Using` (in Visual Basic).</span></span> <span data-ttu-id="75bdc-114">Para obter mais informações, consulte a seção "Usando um objeto que implementa IDisposable" o <xref:System.IDisposable> tópico de interface.</span><span class="sxs-lookup"><span data-stu-id="75bdc-114">For more information, see the "Using an Object that Implements IDisposable" section in the <xref:System.IDisposable> interface topic.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName="Capture">
      <MemberSignature Language="C#" Value="public static System.Security.SecurityContext Capture ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig class System.Security.SecurityContext Capture() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.Capture" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function Capture () As SecurityContext" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static System::Security::SecurityContext ^ Capture();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Security.SecurityContext</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-115">Captura o contexto de segurança para o thread atual.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-115">Captures the security context for the current thread.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-116">O contexto de segurança para o thread atual.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-116">The security context for the current thread.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-117">O contexto de segurança capturada pode ser aplicado a outro thread.</span><span class="sxs-lookup"><span data-stu-id="75bdc-117">The captured security context can be applied to another thread.</span></span> <span data-ttu-id="75bdc-118">O <xref:System.Security.SecurityContext> consiste de <xref:System.Threading.CompressedStack> e <xref:System.Security.Principal.WindowsIdentity> para a execução do thread.</span><span class="sxs-lookup"><span data-stu-id="75bdc-118">The <xref:System.Security.SecurityContext> consists of the <xref:System.Threading.CompressedStack> and the <xref:System.Security.Principal.WindowsIdentity> for the executing thread.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="CreateCopy">
      <MemberSignature Language="C#" Value="public System.Security.SecurityContext CreateCopy ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance class System.Security.SecurityContext CreateCopy() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.CreateCopy" />
      <MemberSignature Language="VB.NET" Value="Public Function CreateCopy () As SecurityContext" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; System::Security::SecurityContext ^ CreateCopy();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Security.SecurityContext</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-119">Cria uma cópia do contexto de segurança atual.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-119">Creates a copy of the current security context.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-120">O contexto de segurança para o thread atual.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-120">The security context for the current thread.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-121">O contexto atual deve ter sido adquirido por meio de uma captura ou de uma operação de cópia.</span><span class="sxs-lookup"><span data-stu-id="75bdc-121">The current context must have been acquired through a capture or a copy operation.</span></span> <span data-ttu-id="75bdc-122">Esse método é útil para aplicar um capturada <xref:System.Security.SecurityContext> em vários threads.</span><span class="sxs-lookup"><span data-stu-id="75bdc-122">This method is useful for applying a captured <xref:System.Security.SecurityContext> to multiple threads.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="75bdc-123">O contexto de segurança atual foi usado anteriormente, passou por marshalling entre domínios de aplicativo ou não foi adquirido por meio do método <see cref="M:System.Security.SecurityContext.Capture" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-123">The current security context has been previously used, was marshaled across application domains, or was not acquired through the <see cref="M:System.Security.SecurityContext.Capture" /> method.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="Dispose">
      <MemberSignature Language="C#" Value="public void Dispose ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Dispose() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.Dispose" />
      <MemberSignature Language="VB.NET" Value="Public Sub Dispose ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual void Dispose();" />
      <MemberType>Method</MemberType>
      <Implements>
        <InterfaceMember>M:System.IDisposable.Dispose</InterfaceMember>
      </Implements>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-124">Libera todos os recursos usados pela instância atual da classe <see cref="T:System.Security.SecurityContext" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-124">Releases all resources used by the current instance of the <see cref="T:System.Security.SecurityContext" /> class.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-125">Chamar `Dispose` quando tiver terminado de usar o <xref:System.Security.SecurityContext>.</span><span class="sxs-lookup"><span data-stu-id="75bdc-125">Call `Dispose` when you are finished using the <xref:System.Security.SecurityContext>.</span></span> <span data-ttu-id="75bdc-126">O `Dispose` método deixa o <xref:System.Security.SecurityContext> em um estado inutilizável.</span><span class="sxs-lookup"><span data-stu-id="75bdc-126">The `Dispose` method leaves the <xref:System.Security.SecurityContext> in an unusable state.</span></span> <span data-ttu-id="75bdc-127">Depois de chamar `Dispose`, você deve liberar todas as referências para o <xref:System.Security.SecurityContext> para o coletor de lixo possa recuperar a memória que o <xref:System.Security.SecurityContext> estava ocupando.</span><span class="sxs-lookup"><span data-stu-id="75bdc-127">After calling `Dispose`, you must release all references to the <xref:System.Security.SecurityContext> so the garbage collector can reclaim the memory that the <xref:System.Security.SecurityContext> was occupying.</span></span>  
  
 <span data-ttu-id="75bdc-128">Para obter mais informações, consulte [limpeza de recursos não gerenciados](~/docs/standard/garbage-collection/unmanaged.md) e [implementar um método Dispose](~/docs/standard/garbage-collection/implementing-dispose.md).</span><span class="sxs-lookup"><span data-stu-id="75bdc-128">For more information, see [Cleaning Up Unmanaged Resources](~/docs/standard/garbage-collection/unmanaged.md) and [Implementing a Dispose Method](~/docs/standard/garbage-collection/implementing-dispose.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="75bdc-129">Sempre chamar `Dispose` antes de liberar sua última referência para o <xref:System.Security.SecurityContext>.</span><span class="sxs-lookup"><span data-stu-id="75bdc-129">Always call `Dispose` before you release your last reference to the <xref:System.Security.SecurityContext>.</span></span> <span data-ttu-id="75bdc-130">Caso contrário, os recursos que está usando não serão liberados até que o coletor de lixo chame o <xref:System.Security.SecurityContext> do objeto `Finalize` método.</span><span class="sxs-lookup"><span data-stu-id="75bdc-130">Otherwise, the resources it is using will not be freed until the garbage collector calls the <xref:System.Security.SecurityContext> object's `Finalize` method.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="IsFlowSuppressed">
      <MemberSignature Language="C#" Value="public static bool IsFlowSuppressed ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig bool IsFlowSuppressed() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.IsFlowSuppressed" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function IsFlowSuppressed () As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static bool IsFlowSuppressed();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-131">Determina se o fluxo do contexto de segurança foi suprimido.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-131">Determines whether the flow of the security context has been suppressed.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-132">
            <see langword="true" /> se o fluxo tiver sido suprimido; caso contrário, <see langword="false" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-132">
              <see langword="true" /> if the flow has been suppressed; otherwise, <see langword="false" />.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-133">O <xref:System.Security.SecurityContext.IsFlowSuppressed%2A> método é usado pelos componentes de infraestrutura para determinar se é preciso transferir a <xref:System.Security.SecurityContext> informações durante as operações assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-133">The <xref:System.Security.SecurityContext.IsFlowSuppressed%2A> method is used by infrastructure components to determine whether to transfer the <xref:System.Security.SecurityContext> information during asynchronous operations.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="IsWindowsIdentityFlowSuppressed">
      <MemberSignature Language="C#" Value="public static bool IsWindowsIdentityFlowSuppressed ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig bool IsWindowsIdentityFlowSuppressed() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.IsWindowsIdentityFlowSuppressed" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function IsWindowsIdentityFlowSuppressed () As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static bool IsWindowsIdentityFlowSuppressed();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-134">Determina se o fluxo da porção de identidade de Windows do contexto de segurança atual foi suprimido.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-134">Determines whether the flow of the Windows identity portion of the current security context has been suppressed.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-135">
            <see langword="true" /> se o fluxo tiver sido suprimido; caso contrário, <see langword="false" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-135">
              <see langword="true" /> if the flow has been suppressed; otherwise, <see langword="false" />.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-136">O <xref:System.Security.SecurityContext.IsWindowsIdentityFlowSuppressed%2A> método é usado pelos componentes de infraestrutura para determinar se deseja transferir as informações de identidade do Windows quando o <xref:System.Security.SecurityContext> migra durante operações assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-136">The <xref:System.Security.SecurityContext.IsWindowsIdentityFlowSuppressed%2A> method is used by infrastructure components to determine whether to transfer the Windows identity information when the <xref:System.Security.SecurityContext> migrates during asynchronous operations.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="RestoreFlow">
      <MemberSignature Language="C#" Value="public static void RestoreFlow ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig void RestoreFlow() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.RestoreFlow" />
      <MemberSignature Language="VB.NET" Value="Public Shared Sub RestoreFlow ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static void RestoreFlow();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-137">Restaura o fluxo do contexto de segurança entre threads assíncronos.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-137">Restores the flow of the security context across asynchronous threads.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-138">O <xref:System.Security.SecurityContext.RestoreFlow%2A> método é chamado pelo <xref:System.Threading.AsyncFlowControl.Undo%2A?displayProperty=nameWithType> método para reverter o efeito de um anterior <xref:System.Security.SecurityContext.SuppressFlow%2A> chamada de método.</span><span class="sxs-lookup"><span data-stu-id="75bdc-138">The <xref:System.Security.SecurityContext.RestoreFlow%2A> method is called by the <xref:System.Threading.AsyncFlowControl.Undo%2A?displayProperty=nameWithType> method to reverse the effect of a prior <xref:System.Security.SecurityContext.SuppressFlow%2A> method call.</span></span>  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="75bdc-139">O contexto de segurança é <see langword="null" /> ou uma cadeia de caracteres vazia.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-139">The security context is <see langword="null" /> or an empty string.</span>
          </span>
        </exception>
      </Docs>
    </Member>
    <Member MemberName="Run">
      <MemberSignature Language="C#" Value="public static void Run (System.Security.SecurityContext securityContext, System.Threading.ContextCallback callback, object state);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig void Run(class System.Security.SecurityContext securityContext, class System.Threading.ContextCallback callback, object state) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.Run(System.Security.SecurityContext,System.Threading.ContextCallback,System.Object)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static void Run(System::Security::SecurityContext ^ securityContext, System::Threading::ContextCallback ^ callback, System::Object ^ state);" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="securityContext" Type="System.Security.SecurityContext" />
        <Parameter Name="callback" Type="System.Threading.ContextCallback" />
        <Parameter Name="state" Type="System.Object" />
      </Parameters>
      <Docs>
        <param name="securityContext">
          <span data-ttu-id="75bdc-140">O contexto de segurança a definir.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-140">The security context to set.</span>
          </span>
        </param>
        <param name="callback">
          <span data-ttu-id="75bdc-141">O delegado que representa o método a ser executado no contexto de segurança especificado.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-141">The delegate that represents the method to run in the specified security context.</span>
          </span>
        </param>
        <param name="state">
          <span data-ttu-id="75bdc-142">O objeto a passar para o método de retorno de chamada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-142">The object to pass to the callback method.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="75bdc-143">Executa o método especificado no contexto de segurança especificado no thread atual.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-143">Runs the specified method in the specified security context on the current thread.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-144">O contexto de segurança para o segmento atual é retornado para seu estado anterior quando a chamada do método está concluída.</span><span class="sxs-lookup"><span data-stu-id="75bdc-144">The security context for the current thread is returned to its previous state when the method call is complete.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="75bdc-145">O exemplo de código a seguir mostra como usar o <xref:System.Security.SecurityContext.Run%2A> método para executar um método em um contexto de segurança especificado.</span><span class="sxs-lookup"><span data-stu-id="75bdc-145">The following code example shows how to use the <xref:System.Security.SecurityContext.Run%2A> method to execute a method in a specified security context.</span></span>  
  
 [!code-csharp[System.Security.SecurityContext.Run#1](~/samples/snippets/csharp/VS_Snippets_CLR_System/system.Security.SecurityContext.Run/CS/form1.cs#1)]
 [!code-vb[System.Security.SecurityContext.Run#1](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/system.Security.SecurityContext.Run/VB/form1.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.InvalidOperationException">
          <span data-ttu-id="75bdc-146">
            <paramref name="securityContext" /> é <see langword="null" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-146">
              <paramref name="securityContext" /> is <see langword="null" />.</span>
          </span>
          <span data-ttu-id="75bdc-147">- ou -</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-147">-or-</span>
          </span>
          <span data-ttu-id="75bdc-148">
            <paramref name="securityContext" /> não foi adquirido por meio de uma operação de captura.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-148">
              <paramref name="securityContext" /> was not acquired through a capture operation.</span>
          </span>
          <span data-ttu-id="75bdc-149">- ou -</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-149">-or-</span>
          </span>
          <span data-ttu-id="75bdc-150">
            <paramref name="securityContext" /> já foi usado como argumento para uma chamada de método <see cref="M:System.Security.SecurityContext.Run(System.Security.SecurityContext,System.Threading.ContextCallback,System.Object)" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-150">
              <paramref name="securityContext" /> has already been used as the argument to a <see cref="M:System.Security.SecurityContext.Run(System.Security.SecurityContext,System.Threading.ContextCallback,System.Object)" /> method call.</span>
          </span>
        </exception>
        <permission cref="T:System.Security.SecurityCriticalAttribute">
          <span data-ttu-id="75bdc-151">requer confiança total para o chamador imediato.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-151">requires full trust for the immediate caller.</span>
          </span>
          <span data-ttu-id="75bdc-152">Este membro não pode ser usado pelo código transparente ou parcialmente confiável.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-152">This member cannot be used by partially trusted or transparent code.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="SuppressFlow">
      <MemberSignature Language="C#" Value="public static System.Threading.AsyncFlowControl SuppressFlow ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig valuetype System.Threading.AsyncFlowControl SuppressFlow() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.SuppressFlow" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function SuppressFlow () As AsyncFlowControl" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static System::Threading::AsyncFlowControl SuppressFlow();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Threading.AsyncFlowControl</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-153">Suprime o fluxo do contexto de segurança entre threads assíncronos.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-153">Suppresses the flow of the security context across asynchronous threads.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-154">Uma estrutura <see cref="T:System.Threading.AsyncFlowControl" /> para restaurar o fluxo.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-154">An <see cref="T:System.Threading.AsyncFlowControl" /> structure for restoring the flow.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-155">Use esse método para suprimir o fluxo de <xref:System.Security.SecurityContext> informações sobre o thread atual para operações assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-155">Use this method to suppress the flow of <xref:System.Security.SecurityContext> information on the current thread for asynchronous operations.</span></span>  
  
 <span data-ttu-id="75bdc-156">O common language runtime (CLR) só está ciente das operações de representação executadas usando código gerenciado.</span><span class="sxs-lookup"><span data-stu-id="75bdc-156">The common language runtime (CLR) is only aware of the impersonation operations performed using managed code.</span></span> <span data-ttu-id="75bdc-157">O CLR não tem conhecimento de representação executada fora do código gerenciado, como a plataforma invoca para código não gerenciado que faz a representação, ou por meio de chamadas a funções do Win32.</span><span class="sxs-lookup"><span data-stu-id="75bdc-157">The CLR has no knowledge of impersonation performed outside of managed code, such as platform invokes to unmanaged code that does the impersonation, or through calls to Win32 functions.</span></span> <span data-ttu-id="75bdc-158">A identidade de fluxo nos pontos de assíncronas, você deve usar o gerenciado <xref:System.Security.Principal.WindowsIdentity> e <xref:System.Security.Principal.WindowsImpersonationContext> métodos.</span><span class="sxs-lookup"><span data-stu-id="75bdc-158">To flow identity across asynchronous points you must use the managed <xref:System.Security.Principal.WindowsIdentity> and <xref:System.Security.Principal.WindowsImpersonationContext> methods.</span></span>  
  
 <span data-ttu-id="75bdc-159">Use o <xref:System.Threading.AsyncFlowControl.Undo%2A> método retornado <xref:System.Threading.AsyncFlowControl> estrutura para retornar o <xref:System.Security.SecurityContext> objeto para seu estado anterior.</span><span class="sxs-lookup"><span data-stu-id="75bdc-159">Use the <xref:System.Threading.AsyncFlowControl.Undo%2A> method on the returned <xref:System.Threading.AsyncFlowControl> structure to return the <xref:System.Security.SecurityContext> object to its previous state.</span></span>  
  
 <span data-ttu-id="75bdc-160">Esse método é protegido com uma <xref:System.Security.Permissions.SecurityAction.LinkDemand?displayProperty=nameWithType> para <xref:System.Security.Permissions.SecurityPermissionFlag.Infrastructure?displayProperty=nameWithType> permissão.</span><span class="sxs-lookup"><span data-stu-id="75bdc-160">This method is protected with a <xref:System.Security.Permissions.SecurityAction.LinkDemand?displayProperty=nameWithType> for <xref:System.Security.Permissions.SecurityPermissionFlag.Infrastructure?displayProperty=nameWithType> permission.</span></span> <span data-ttu-id="75bdc-161">Um componente totalmente confiável pode chamar esse método para suprimir o fluxo do <xref:System.Security.SecurityContext> informações durante chamadas assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-161">A fully trusted component can call this method to suppress the flow of the <xref:System.Security.SecurityContext> information during asynchronous calls.</span></span> <span data-ttu-id="75bdc-162">Quando o fluxo é suprimido, a <xref:System.Security.SecurityContext.Capture%2A> método retornará `null`.</span><span class="sxs-lookup"><span data-stu-id="75bdc-162">When the flow is suppressed, the <xref:System.Security.SecurityContext.Capture%2A> method returns `null`.</span></span>  
  
 ]]></format>
        </remarks>
        <permission cref="T:System.Security.SecurityCriticalAttribute">
          <span data-ttu-id="75bdc-163">requer confiança total para o chamador imediato.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-163">requires full trust for the immediate caller.</span>
          </span>
          <span data-ttu-id="75bdc-164">Este membro não pode ser usado pelo código transparente ou parcialmente confiável.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-164">This member cannot be used by partially trusted or transparent code.</span>
          </span>
        </permission>
      </Docs>
    </Member>
    <Member MemberName="SuppressFlowWindowsIdentity">
      <MemberSignature Language="C#" Value="public static System.Threading.AsyncFlowControl SuppressFlowWindowsIdentity ();" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig valuetype System.Threading.AsyncFlowControl SuppressFlowWindowsIdentity() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Security.SecurityContext.SuppressFlowWindowsIdentity" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function SuppressFlowWindowsIdentity () As AsyncFlowControl" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static System::Threading::AsyncFlowControl SuppressFlowWindowsIdentity();" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Security.Permissions</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Threading.AsyncFlowControl</ReturnType>
      </ReturnValue>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="75bdc-165">Suprime o fluxo da porção de identidade de Windows do contexto de segurança atual entre threads assíncronos.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-165">Suppresses the flow of the Windows identity portion of the current security context across asynchronous threads.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="75bdc-166">Uma estrutura para restaurar o fluxo.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-166">A structure for restoring the flow.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="75bdc-167">Use esse método para suprimir o fluxo da identidade do Windows quando o <xref:System.Security.SecurityContext> migra entre threads assíncronas.</span><span class="sxs-lookup"><span data-stu-id="75bdc-167">Use this method to suppress the flow of the Windows identity when the <xref:System.Security.SecurityContext> migrates across asynchronous threads.</span></span>  
  
 <span data-ttu-id="75bdc-168">Use o <xref:System.Threading.AsyncFlowControl.Undo%2A> método retornado <xref:System.Threading.AsyncFlowControl> estrutura para retornar o <xref:System.Security.SecurityContext> objeto para seu estado anterior.</span><span class="sxs-lookup"><span data-stu-id="75bdc-168">Use the <xref:System.Threading.AsyncFlowControl.Undo%2A> method on the returned <xref:System.Threading.AsyncFlowControl> structure to return the <xref:System.Security.SecurityContext> object to its previous state.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="75bdc-169">O common language runtime (CLR) está ciente das operações executadas usando somente código gerenciado, não de representação executada fora do código gerenciado, como por meio da plataforma chamar código não gerenciado ou por meio de chamadas diretas para funções do Win32 de representação.</span><span class="sxs-lookup"><span data-stu-id="75bdc-169">The common language runtime (CLR) is aware of impersonation operations performed using only managed code, not of impersonation performed outside of managed code, such as through platform invoke to unmanaged code or through direct calls to Win32 functions.</span></span> <span data-ttu-id="75bdc-170">Somente gerenciado <xref:System.Security.Principal.WindowsIdentity> objetos possam fluir entre pontos assíncronos, a menos que o `alwaysFlowImpersonationPolicy` elemento foi definido como `true` (`<alwaysFlowImpersonationPolicy enabled="true"/>`).</span><span class="sxs-lookup"><span data-stu-id="75bdc-170">Only managed <xref:System.Security.Principal.WindowsIdentity> objects can flow across asynchronous points, unless the `alwaysFlowImpersonationPolicy` element has been set to `true` (`<alwaysFlowImpersonationPolicy enabled="true"/>`).</span></span> <span data-ttu-id="75bdc-171">Definindo o `alwaysFlowImpersonationPolicy` elemento `true` Especifica que a identidade do Windows sempre flui pelos pontos assíncronos, independentemente de como a representação foi executada.</span><span class="sxs-lookup"><span data-stu-id="75bdc-171">Setting the `alwaysFlowImpersonationPolicy` element to `true` specifies that the Windows identity always flows across asynchronous points, regardless of how impersonation was performed.</span></span> <span data-ttu-id="75bdc-172">Para obter mais informações sobre o fluxo não gerenciado a representação pelos pontos assíncronos, consulte [ \<alwaysFlowImpersonationPolicy > elemento](~/docs/framework/configure-apps/file-schema/runtime/alwaysflowimpersonationpolicy-element.md).</span><span class="sxs-lookup"><span data-stu-id="75bdc-172">For more information about flowing unmanaged impersonation across asynchronous points, see [\<alwaysFlowImpersonationPolicy> Element](~/docs/framework/configure-apps/file-schema/runtime/alwaysflowimpersonationpolicy-element.md).</span></span>  
  
 ]]></format>
        </remarks>
        <permission cref="T:System.Security.SecurityCriticalAttribute">
          <span data-ttu-id="75bdc-173">requer confiança total para o chamador imediato.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-173">requires full trust for the immediate caller.</span>
          </span>
          <span data-ttu-id="75bdc-174">Este membro não pode ser usado pelo código transparente ou parcialmente confiável.</span>
          <span class="sxs-lookup">
            <span data-stu-id="75bdc-174">This member cannot be used by partially trusted or transparent code.</span>
          </span>
        </permission>
      </Docs>
    </Member>
  </Members>
</Type>