<Type Name="WorkflowPersistenceService" FullName="System.Workflow.Runtime.Hosting.WorkflowPersistenceService">
  <Metadata>
    <Meta Name="ms.openlocfilehash" Value="c742a078c39671956d687e07cbccd410cf37853f" />
    <Meta Name="ms.sourcegitcommit" Value="d877ae76e9e11799bf919379507239e2c4072742" />
    <Meta Name="ms.translationtype" Value="HT" />
    <Meta Name="ms.contentlocale" Value="pt-BR" />
    <Meta Name="ms.lasthandoff" Value="08/09/2018" />
    <Meta Name="ms.locfileid" Value="39821067" />
  </Metadata>
  <TypeSignature Language="C#" Value="public abstract class WorkflowPersistenceService : System.Workflow.Runtime.Hosting.WorkflowRuntimeService" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract beforefieldinit WorkflowPersistenceService extends System.Workflow.Runtime.Hosting.WorkflowRuntimeService" />
  <TypeSignature Language="DocId" Value="T:System.Workflow.Runtime.Hosting.WorkflowPersistenceService" />
  <TypeSignature Language="VB.NET" Value="Public MustInherit Class WorkflowPersistenceService&#xA;Inherits WorkflowRuntimeService" />
  <TypeSignature Language="C++ CLI" Value="public ref class WorkflowPersistenceService abstract : System::Workflow::Runtime::Hosting::WorkflowRuntimeService" />
  <TypeSignature Language="F#" Value="type WorkflowPersistenceService = class&#xA;    inherit WorkflowRuntimeService" />
  <AssemblyInfo>
    <AssemblyName>System.Workflow.Runtime</AssemblyName>
    <AssemblyVersion>3.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Workflow.Runtime.Hosting.WorkflowRuntimeService</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2">
      <AttributeName>System.Obsolete("The System.Workflow.* types are deprecated.  Instead, please use the new types from System.Activities.*")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary>
      <span data-ttu-id="d2db2-101">A classe base abstrata da qual todos os serviços de persistência são derivados.</span>
      <span class="sxs-lookup">
        <span data-stu-id="d2db2-101">The abstract base class from which all persistence services are derived.</span>
      </span>
    </summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
  
> [!NOTE]
>  [!INCLUDE[DeprecatedContent](~/includes/deprecatedcontent-md.md)]  
  
 <span data-ttu-id="d2db2-102">Quando determinadas condições ocorrem enquanto o fluxo de trabalho está em execução, o mecanismo de tempo de execução do fluxo de trabalho persiste informações de estado sobre a instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-102">When certain conditions occur while the workflow is running, the workflow runtime engine persists state information about the workflow instance.</span></span> <span data-ttu-id="d2db2-103">Persistência pode ocorrer, por exemplo, quando uma conclusão de transação atômica, quando a instância de fluxo de trabalho fica ociosa, quando o host chama <xref:System.Workflow.Runtime.WorkflowInstance.Unload%2A?displayProperty=nameWithType> na instância do fluxo de trabalho, ou quando uma instância de fluxo de trabalho seja finalizada ou termina.</span><span class="sxs-lookup"><span data-stu-id="d2db2-103">Persistence can occur, for example, when an atomic transaction finishes, when the workflow instance becomes idle, when the host calls <xref:System.Workflow.Runtime.WorkflowInstance.Unload%2A?displayProperty=nameWithType> on the workflow instance, or when a workflow instance is terminated or finishes.</span></span> <span data-ttu-id="d2db2-104">Quando a semântica de mecanismo de tempo de execução de fluxo de trabalho dita que a persistência deve ocorrer, o mecanismo de tempo de execução do fluxo de trabalho chama métodos que são fornecidos por um serviço de persistência para salvar as informações de estado sobre a instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-104">When the workflow runtime engine semantics dictate that persistence should occur, the workflow runtime engine calls methods that are supplied by a persistence service to save state information about the workflow instance.</span></span> <span data-ttu-id="d2db2-105">Da mesma forma, quando o mecanismo de tempo de execução do fluxo de trabalho precisa restaurar uma instância de fluxo de trabalho persistidas anteriormente, ele chama os métodos que são fornecidos pelo serviço de persistência para carregar essas informações de estado.</span><span class="sxs-lookup"><span data-stu-id="d2db2-105">Likewise, when the workflow runtime engine needs to restore a previously persisted workflow instance, it calls methods that are supplied by the persistence service to load this state information.</span></span> <span data-ttu-id="d2db2-106">O mecanismo de tempo de execução do fluxo de trabalho lida com toda a semântica de referentes a quando a persistência será executada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-106">The workflow runtime engine handles all the semantics regarding when to perform persistence.</span></span> <span data-ttu-id="d2db2-107">O serviço de persistência trata realmente salvar e carregar as informações de estado de fluxo de trabalho de ou para um armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-107">The persistence service handles actually saving and loading the workflow state information to or from a data store.</span></span>  
  
 <span data-ttu-id="d2db2-108">Você pode criar um serviço de persistência derivando uma classe a partir de <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> classe.</span><span class="sxs-lookup"><span data-stu-id="d2db2-108">You can create a persistence service by deriving a class from the <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> class.</span></span>  <span data-ttu-id="d2db2-109">Você pode adicionar o serviço de persistência para o mecanismo de tempo de execução do fluxo de trabalho chamando <xref:System.Workflow.Runtime.WorkflowRuntime.AddService%2A> ou fazendo uma entrada apropriada no arquivo de configuração do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="d2db2-109">You can add your persistence service to the workflow runtime engine by calling <xref:System.Workflow.Runtime.WorkflowRuntime.AddService%2A> or by making an appropriate entry in the application configuration file.</span></span> <span data-ttu-id="d2db2-110">O <xref:System.Workflow.Runtime.WorkflowRuntime> deve conter apenas um serviço de persistência.</span><span class="sxs-lookup"><span data-stu-id="d2db2-110">The <xref:System.Workflow.Runtime.WorkflowRuntime> should only contain one persistence service.</span></span> <span data-ttu-id="d2db2-111">Windows Workflow Foundation fornece o <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> de classe, um serviço de persistência de out-of-box, que pode ser usado como está ou estender.</span><span class="sxs-lookup"><span data-stu-id="d2db2-111">Windows Workflow Foundation provides the <xref:System.Workflow.Runtime.Hosting.SqlWorkflowPersistenceService> class, an out-of-box persistence service, which you can use as is or extend.</span></span>  
  
 <span data-ttu-id="d2db2-112">O mecanismo de tempo de execução do fluxo de trabalho tem semântica de bloqueio de informações de estado de fluxo de trabalho para uso em ambientes em que os serviços de persistência que são executados em diferentes processos talvez tenha acesso a um único repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-112">The workflow runtime engine has semantics for locking workflow state information for use in environments where persistence services that run in different processes might have access to a single data store.</span></span> <span data-ttu-id="d2db2-113">O <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> classe fornece a capacidade de dar suporte a essa funcionalidade do mecanismo de tempo de execução do fluxo de trabalho, fornecendo um parâmetro para <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> que especifica se as informações de estado de uma instância de fluxo de trabalho devem ser desbloqueadas no repositório de dados, e fornecendo um método <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnlockWorkflowInstanceState%2A> desbloquear anteriormente bloqueado informações de estado de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-113">The <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService> class provides the capability to support this functionality of the workflow runtime engine by providing a parameter to <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> that specifies whether the state information of a workflow instance should be unlocked in the data store, and by providing a method <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnlockWorkflowInstanceState%2A> to unlock previously locked workflow state information.</span></span> <span data-ttu-id="d2db2-114">Em um serviço de persistência que implementa o bloqueio, uma chamada para <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A> deve bloquear as informações de estado para uma instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-114">In a persistence service that implements locking, a call to <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A> should lock the state information for a workflow instance.</span></span>  
  
 <span data-ttu-id="d2db2-115">O serviço de persistência deve lançar uma <xref:System.Workflow.Runtime.Hosting.PersistenceException> se ele falhar ao salvar informações de estado em seu armazenamento de dados ou carregar informações de estado do seu repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-115">Your persistence service should throw a <xref:System.Workflow.Runtime.Hosting.PersistenceException> if it fails to save state information to its data store or load state information from its data store.</span></span> <span data-ttu-id="d2db2-116">O mecanismo de tempo de execução do fluxo de trabalho espera que esse comportamento.</span><span class="sxs-lookup"><span data-stu-id="d2db2-116">The workflow runtime engine expects this behavior.</span></span>  
  
 <span data-ttu-id="d2db2-117">Um mecanismo de envio em lote é fornecido para serviços que usam um armazenamento durável para salvar as informações de estado de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-117">A batching mechanism is provided for services that use a durable store to save workflow state information.</span></span> <span data-ttu-id="d2db2-118">É importante para manter a consistência entre o armazenamento durável que é usado pelo serviço de persistência e o estado interno do mecanismo de tempo de execução de fluxo de trabalho nesses casos.</span><span class="sxs-lookup"><span data-stu-id="d2db2-118">It is important in these cases to maintain consistency between the durable store that is used by the persistence service and the internal state of the workflow runtime engine.</span></span> <span data-ttu-id="d2db2-119">Você pode adicionar funcionalidade definida pela <xref:System.Workflow.Runtime.IPendingWork> interface ao seu serviço e, em seguida, participar de lote de transações de fluxo de trabalho fornecida pelo <xref:System.Workflow.Runtime.Hosting.WorkflowCommitWorkBatchService> adicionando as alterações ao seu armazenamento de dados como itens de trabalho para o <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-119">You can add functionality defined by the <xref:System.Workflow.Runtime.IPendingWork> interface to your service, and then participate in workflow transaction batching provided by the <xref:System.Workflow.Runtime.Hosting.WorkflowCommitWorkBatchService> by adding changes to your data store as work items to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A>.</span></span> <span data-ttu-id="d2db2-120">O armazenamento durável propriamente dito deve implementar o <xref:System.Transactions.IEnlistmentNotification> interface, para que as informações de fluxo de trabalho não são persistidas incorretamente no caso de uma reversão de transação.</span><span class="sxs-lookup"><span data-stu-id="d2db2-120">The durable store itself should implement the <xref:System.Transactions.IEnlistmentNotification> interface, so that workflow information is not persisted incorrectly in the event of a transaction rollback.</span></span> <span data-ttu-id="d2db2-121">Para obter mais informações, consulte <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveCompletedContextActivity%2A> ou <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-121">For more information, see <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveCompletedContextActivity%2A> or <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A>.</span></span>  
  
 ]]></format>
    </remarks>
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="protected WorkflowPersistenceService ();" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.#ctor" />
      <MemberSignature Language="VB.NET" Value="Protected Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; WorkflowPersistenceService();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary>
          <span data-ttu-id="d2db2-122">Quando implementado em uma classe derivada, inicializa uma nova instância da classe <see cref="T:System.Workflow.Runtime.Hosting.WorkflowPersistenceService" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-122">When implemented in a derived class, initializes a new instance of the <see cref="T:System.Workflow.Runtime.Hosting.WorkflowPersistenceService" /> class.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Examples  
 <span data-ttu-id="d2db2-123">O exemplo a seguir demonstra como criar uma instância das `SqlWorkflowPersistenceService` classe (derivado de `WorkflowPersistenceService`).</span><span class="sxs-lookup"><span data-stu-id="d2db2-123">The following example demonstrates creating an instance of the `SqlWorkflowPersistenceService` class (derived from `WorkflowPersistenceService`).</span></span> <span data-ttu-id="d2db2-124">Este exemplo é do exemplo de SDK de manipuladores de exceção aninhados, da classe Program.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-124">This example is from the Nested Exception Handlers SDK sample, from the Program.cs class.</span></span>  <span data-ttu-id="d2db2-125">Para obter mais informações, consulte o [exemplo de manipuladores de exceção aninhados](http://msdn.microsoft.com/library/d1da0209-842b-41c8-9b7c-0cbaa1034265).</span><span class="sxs-lookup"><span data-stu-id="d2db2-125">For more information, see the [Nested Exception Handlers Sample](http://msdn.microsoft.com/library/d1da0209-842b-41c8-9b7c-0cbaa1034265).</span></span>  
  
 [!code-csharp[WF_Samples#161](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets11.cs#161)]
 [!code-vb[WF_Samples#161](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets11.vb#161)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetDefaultSerializedForm">
      <MemberSignature Language="C#" Value="protected static byte[] GetDefaultSerializedForm (System.Workflow.ComponentModel.Activity activity);" />
      <MemberSignature Language="ILAsm" Value=".method familystatic hidebysig unsigned int8[] GetDefaultSerializedForm(class System.Workflow.ComponentModel.Activity activity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetDefaultSerializedForm(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; static cli::array &lt;System::Byte&gt; ^ GetDefaultSerializedForm(System::Workflow::ComponentModel::Activity ^ activity);" />
      <MemberSignature Language="F#" Value="static member GetDefaultSerializedForm : System.Workflow.ComponentModel.Activity -&gt; byte[]" Usage="System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetDefaultSerializedForm activity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Byte[]</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="activity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="activity">
          <span data-ttu-id="d2db2-126">O <see cref="T:System.Workflow.ComponentModel.Activity" /> cujo formato serializado é solicitado.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-126">The <see cref="T:System.Workflow.ComponentModel.Activity" /> whose serialized form is requested.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-127">Recupera o formato padrão serializado da <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-127">Retrieves the serialized default form of the <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-128">O formato serializado padrão da <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-128">The serialized default form of the <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="GetIsBlocked">
      <MemberSignature Language="C#" Value="protected internal static bool GetIsBlocked (System.Workflow.ComponentModel.Activity rootActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblystatic hidebysig bool GetIsBlocked(class System.Workflow.ComponentModel.Activity rootActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetIsBlocked(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Shared Function GetIsBlocked (rootActivity As Activity) As Boolean" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; static bool GetIsBlocked(System::Workflow::ComponentModel::Activity ^ rootActivity);" />
      <MemberSignature Language="F#" Value="static member GetIsBlocked : System.Workflow.ComponentModel.Activity -&gt; bool" Usage="System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetIsBlocked rootActivity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="d2db2-129">A atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-129">The root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-130">Indica se a atividade fornecida está bloqueada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-130">Indicates whether the given activity is blocked.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-131">
            <see langword="true" /> se a atividade fornecida estiver bloqueada, caso contrário, <see langword="false" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-131">
              <see langword="true" /> if the given activity is blocked; otherwise, <see langword="false" />.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="GetSuspendOrTerminateInfo">
      <MemberSignature Language="C#" Value="protected internal static string GetSuspendOrTerminateInfo (System.Workflow.ComponentModel.Activity rootActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblystatic hidebysig string GetSuspendOrTerminateInfo(class System.Workflow.ComponentModel.Activity rootActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetSuspendOrTerminateInfo(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Shared Function GetSuspendOrTerminateInfo (rootActivity As Activity) As String" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; static System::String ^ GetSuspendOrTerminateInfo(System::Workflow::ComponentModel::Activity ^ rootActivity);" />
      <MemberSignature Language="F#" Value="static member GetSuspendOrTerminateInfo : System.Workflow.ComponentModel.Activity -&gt; string" Usage="System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetSuspendOrTerminateInfo rootActivity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="d2db2-132">A atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-132">The root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-133">Recupera as informações de término ou de suspensão da atividade fornecida.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-133">Retrieves the termination or suspend information of the given activity.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-134">Uma <see cref="T:System.String" /> que contém informações de término ou de suspensão.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-134">A <see cref="T:System.String" /> that contains the termination or suspend information.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="GetWorkflowStatus">
      <MemberSignature Language="C#" Value="protected internal static System.Workflow.Runtime.WorkflowStatus GetWorkflowStatus (System.Workflow.ComponentModel.Activity rootActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblystatic hidebysig valuetype System.Workflow.Runtime.WorkflowStatus GetWorkflowStatus(class System.Workflow.ComponentModel.Activity rootActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetWorkflowStatus(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Shared Function GetWorkflowStatus (rootActivity As Activity) As WorkflowStatus" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; static System::Workflow::Runtime::WorkflowStatus GetWorkflowStatus(System::Workflow::ComponentModel::Activity ^ rootActivity);" />
      <MemberSignature Language="F#" Value="static member GetWorkflowStatus : System.Workflow.ComponentModel.Activity -&gt; System.Workflow.Runtime.WorkflowStatus" Usage="System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetWorkflowStatus rootActivity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.Runtime.WorkflowStatus</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="d2db2-135">A atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-135">The root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-136">Recupera o status do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-136">Retrieves the status of the workflow.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-137">Um valor de enumeração de <see cref="T:System.Workflow.Runtime.WorkflowStatus" /> que indica o status do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-137">A <see cref="T:System.Workflow.Runtime.WorkflowStatus" /> enumeration value that denotes the status of the workflow.</span>
          </span>
        </returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadCompletedContextActivity">
      <MemberSignature Language="C#" Value="protected internal abstract System.Workflow.ComponentModel.Activity LoadCompletedContextActivity (Guid scopeId, System.Workflow.ComponentModel.Activity outerActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance class System.Workflow.ComponentModel.Activity LoadCompletedContextActivity(valuetype System.Guid scopeId, class System.Workflow.ComponentModel.Activity outerActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity(System.Guid,System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend MustOverride Function LoadCompletedContextActivity (scopeId As Guid, outerActivity As Activity) As Activity" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract System::Workflow::ComponentModel::Activity ^ LoadCompletedContextActivity(Guid scopeId, System::Workflow::ComponentModel::Activity ^ outerActivity);" />
      <MemberSignature Language="F#" Value="abstract member LoadCompletedContextActivity : Guid * System.Workflow.ComponentModel.Activity -&gt; System.Workflow.ComponentModel.Activity" Usage="workflowPersistenceService.LoadCompletedContextActivity (scopeId, outerActivity)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.ComponentModel.Activity</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="scopeId" Type="System.Guid" />
        <Parameter Name="outerActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="scopeId">
          <span data-ttu-id="d2db2-138">O <see cref="T:System.Guid" /> do escopo concluído.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-138">The <see cref="T:System.Guid" /> of the completed scope.</span>
          </span>
        </param>
        <param name="outerActivity">
          <span data-ttu-id="d2db2-139">Uma <see cref="T:System.Workflow.ComponentModel.Activity" /> que representa a atividade que inclui o escopo concluído.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-139">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the activity that encloses the completed scope.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-140">Quando implementada em uma classe derivada, carrega o escopo concluído especificado novamente na memória.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-140">When implemented in a derived class, loads the specified completed scope back into memory.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-141">Uma <see cref="T:System.Workflow.ComponentModel.Activity" /> que representa o escopo concluído.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-141">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the completed scope.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d2db2-142">O mecanismo de tempo de execução do fluxo de trabalho usa <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A> para implementar a compensação.</span><span class="sxs-lookup"><span data-stu-id="d2db2-142">The workflow runtime engine uses <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A> to implement compensation.</span></span> <span data-ttu-id="d2db2-143">Você deve restaurar uma cópia idêntica do escopo concluído.</span><span class="sxs-lookup"><span data-stu-id="d2db2-143">You must restore an identical copy of the completed scope.</span></span> <span data-ttu-id="d2db2-144">Para fazer isso, você deve restaurar válido <xref:System.IO.Stream> em sua representação do escopo concluído nos dados de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="d2db2-144">To do this, you must restore a valid <xref:System.IO.Stream> from your representation of the completed scope in the data store.</span></span> <span data-ttu-id="d2db2-145">Em seguida, você deve passar isso <xref:System.IO.Stream> a um dos métodos sobrecarregados de <xref:System.Workflow.ComponentModel.Activity.Load%2A> para realizar a desserialização do escopo.</span><span class="sxs-lookup"><span data-stu-id="d2db2-145">Then you must pass this <xref:System.IO.Stream> to one of the overloaded methods of <xref:System.Workflow.ComponentModel.Activity.Load%2A> to perform deserialization of the scope.</span></span>  
  
 <span data-ttu-id="d2db2-146">Se seu serviço de persistência não é possível carregar o escopo concluído de seu armazenamento de dados, ele deve gerar um <xref:System.Workflow.Runtime.Hosting.PersistenceException> com uma mensagem apropriada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-146">If your persistence service cannot load the completed scope from its data store, it should throw a <xref:System.Workflow.Runtime.Hosting.PersistenceException> with an appropriate message.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="d2db2-147">O exemplo a seguir demonstra uma implementação do `LoadCompletedContextActivity` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-147">The following example demonstrates an implementation of the `LoadCompletedContextActivity` method.</span></span> <span data-ttu-id="d2db2-148">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-148">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-149">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-149">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#269](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#269)]
 [!code-vb[WF_Samples#269](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#269)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="LoadWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal abstract System.Workflow.ComponentModel.Activity LoadWorkflowInstanceState (Guid instanceId);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance class System.Workflow.ComponentModel.Activity LoadWorkflowInstanceState(valuetype System.Guid instanceId) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState(System.Guid)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend MustOverride Function LoadWorkflowInstanceState (instanceId As Guid) As Activity" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract System::Workflow::ComponentModel::Activity ^ LoadWorkflowInstanceState(Guid instanceId);" />
      <MemberSignature Language="F#" Value="abstract member LoadWorkflowInstanceState : Guid -&gt; System.Workflow.ComponentModel.Activity" Usage="workflowPersistenceService.LoadWorkflowInstanceState instanceId" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.ComponentModel.Activity</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="instanceId" Type="System.Guid" />
      </Parameters>
      <Docs>
        <param name="instanceId">
          <span data-ttu-id="d2db2-150">O <see cref="T:System.Guid" /> da atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-150">The <see cref="T:System.Guid" /> of the root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-151">Quando implementada em uma classe derivada, carrega o estado especificado da instância de fluxo de trabalho novamente na memória.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-151">When implemented in a derived class, loads the specified state of the workflow instance back into memory.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-152">Uma <see cref="T:System.Workflow.ComponentModel.Activity" /> que representa a atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-152">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the root activity of the workflow instance.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d2db2-153">Você deve restaurar uma cópia idêntica da atividade.</span><span class="sxs-lookup"><span data-stu-id="d2db2-153">You must restore an identical copy of the activity.</span></span> <span data-ttu-id="d2db2-154">Para fazer isso, você deve restaurar válida <xref:System.IO.Stream> de sua representação da instância do fluxo de trabalho no armazenamento de dados; em seguida, você deve passar isso <xref:System.IO.Stream> dentre sobrecarregado <xref:System.Workflow.ComponentModel.Activity.Load%2A> estado da instância de métodos para desserializar o fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-154">To do this, you must restore a valid <xref:System.IO.Stream> from your representation of the workflow instance in the data store; then you must pass this <xref:System.IO.Stream> to one of the overloaded <xref:System.Workflow.ComponentModel.Activity.Load%2A> methods to deserialize the workflow instance state.</span></span> <span data-ttu-id="d2db2-155">Se seu serviço de persistência não é possível carregar o estado da instância de fluxo de trabalho de seu armazenamento de dados, ele deve gerar um <xref:System.Workflow.Runtime.Hosting.PersistenceException> com uma mensagem apropriada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-155">If your persistence service cannot load the workflow instance state from its data store, it should throw a <xref:System.Workflow.Runtime.Hosting.PersistenceException> with an appropriate message.</span></span>  
  
 <span data-ttu-id="d2db2-156">O mecanismo de tempo de execução do fluxo de trabalho implementa a semântica de bloqueio para restringir o acesso a um estado de instância de fluxo de trabalho é salvo em um armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-156">The workflow runtime engine implements locking semantics to restrict access to a workflow instance state that is saved in a data store.</span></span> <span data-ttu-id="d2db2-157">Isso pode ser acessado por serviços de persistência que são executados em vários processos.</span><span class="sxs-lookup"><span data-stu-id="d2db2-157">This can be accessed by persistence services that run in multiple processes.</span></span> <span data-ttu-id="d2db2-158">A semântica de bloqueio é projetada para impedir que os serviços de persistência que são executados em dois processos diferentes de carregar a mesma instância de fluxo de trabalho na memória ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="d2db2-158">The locking semantics are designed to prevent persistence services that run in two different processes from loading the same workflow instance into memory at the same time.</span></span> <span data-ttu-id="d2db2-159">Dependendo do tipo de ambiente que seu serviço de persistência foi projetado para dar suporte, você pode optar por dar suporte a essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="d2db2-159">Depending on the type of environment that your persistence service is designed to support, you may choose whether to support this functionality.</span></span> <span data-ttu-id="d2db2-160">Se você optar por oferecer suporte a semântica de bloqueio de tempo de execução, e se esse fluxo de trabalho instância estado foi bloqueada anteriormente por outro processo, você deve lançar uma <xref:System.Workflow.Runtime.WorkflowOwnershipException>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-160">If you choose to support the runtime locking semantics, and if this workflow instance state has been previously locked by another process, then you should throw a <xref:System.Workflow.Runtime.WorkflowOwnershipException>.</span></span> <span data-ttu-id="d2db2-161">Caso contrário, você deve bloquear o acesso para o estado da instância de fluxo de trabalho no seu armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-161">Otherwise, you should lock access to the workflow instance state in your data store.</span></span> <span data-ttu-id="d2db2-162">O estado da instância de fluxo de trabalho pode ser desbloqueado por uma chamada para <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnlockWorkflowInstanceState%2A> ou uma chamada para <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> com o parâmetro de desbloqueio definido como `true`.</span><span class="sxs-lookup"><span data-stu-id="d2db2-162">The workflow instance state can be unlocked by a call to <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnlockWorkflowInstanceState%2A> or a call to <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> with the unlock parameter set to `true`.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="d2db2-163">O exemplo a seguir demonstra uma implementação do `LoadWorkflowInstanceState` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-163">The following example demonstrates an implementation of the `LoadWorkflowInstanceState` method.</span></span> <span data-ttu-id="d2db2-164">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-164">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-165">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-165">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#266](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#266)]
 [!code-vb[WF_Samples#266](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#266)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="RestoreFromDefaultSerializedForm">
      <MemberSignature Language="C#" Value="protected static System.Workflow.ComponentModel.Activity RestoreFromDefaultSerializedForm (byte[] activityBytes, System.Workflow.ComponentModel.Activity outerActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familystatic hidebysig class System.Workflow.ComponentModel.Activity RestoreFromDefaultSerializedForm(unsigned int8[] activityBytes, class System.Workflow.ComponentModel.Activity outerActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.RestoreFromDefaultSerializedForm(System.Byte[],System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Shared Function RestoreFromDefaultSerializedForm (activityBytes As Byte(), outerActivity As Activity) As Activity" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; static System::Workflow::ComponentModel::Activity ^ RestoreFromDefaultSerializedForm(cli::array &lt;System::Byte&gt; ^ activityBytes, System::Workflow::ComponentModel::Activity ^ outerActivity);" />
      <MemberSignature Language="F#" Value="static member RestoreFromDefaultSerializedForm : byte[] * System.Workflow.ComponentModel.Activity -&gt; System.Workflow.ComponentModel.Activity" Usage="System.Workflow.Runtime.Hosting.WorkflowPersistenceService.RestoreFromDefaultSerializedForm (activityBytes, outerActivity)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Workflow.ComponentModel.Activity</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="activityBytes" Type="System.Byte[]" />
        <Parameter Name="outerActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="activityBytes">
          <span data-ttu-id="d2db2-166">O formato serializado da <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-166">The serialized form of <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          </span>
        </param>
        <param name="outerActivity">
          <span data-ttu-id="d2db2-167">A <see cref="T:System.Workflow.ComponentModel.Activity" /> externa, que contém a <see cref="T:System.Workflow.ComponentModel.Activity" /> a ser restaurada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-167">The outer <see cref="T:System.Workflow.ComponentModel.Activity" />, containing the <see cref="T:System.Workflow.ComponentModel.Activity" /> to restore.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-168">Restaura a atividade <see cref="T:System.Workflow.ComponentModel.Activity" /> de sua forma serializada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-168">Restores the <see cref="T:System.Workflow.ComponentModel.Activity" /> from its serialized form.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-169">A <see cref="T:System.Workflow.ComponentModel.Activity" /> restaurada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-169">The restored <see cref="T:System.Workflow.ComponentModel.Activity" />.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Examples  
 <span data-ttu-id="d2db2-170">O exemplo a seguir demonstra uma implementação do `RestoreFromDefaultSerializedForm` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-170">The following example demonstrates an implementation of the `RestoreFromDefaultSerializedForm` method.</span></span> <span data-ttu-id="d2db2-171">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-171">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-172">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-172">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#269](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#269)]
 [!code-vb[WF_Samples#269](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#269)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="SaveCompletedContextActivity">
      <MemberSignature Language="C#" Value="protected internal abstract void SaveCompletedContextActivity (System.Workflow.ComponentModel.Activity activity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance void SaveCompletedContextActivity(class System.Workflow.ComponentModel.Activity activity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveCompletedContextActivity(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract void SaveCompletedContextActivity(System::Workflow::ComponentModel::Activity ^ activity);" />
      <MemberSignature Language="F#" Value="abstract member SaveCompletedContextActivity : System.Workflow.ComponentModel.Activity -&gt; unit" Usage="workflowPersistenceService.SaveCompletedContextActivity activity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="activity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="activity">
          <span data-ttu-id="d2db2-173">Uma <see cref="T:System.Workflow.ComponentModel.Activity" /> que representa o escopo concluído.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-173">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the completed scope.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-174">Quando implementada em uma classe derivada, salva o escopo concluído especificado em um armazenamento de dados.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-174">When implemented in a derived class, saves the specified completed scope to a data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d2db2-175">O mecanismo de tempo de execução do fluxo de trabalho salva o estado de atividades do escopo concluído para implementar a compensação.</span><span class="sxs-lookup"><span data-stu-id="d2db2-175">The workflow runtime engine saves the state of completed scope activities in order to implement compensation.</span></span> <span data-ttu-id="d2db2-176">Você deve chamar uma das sobrecarregado <xref:System.Workflow.ComponentModel.Activity.Save%2A> métodos para serializar `activity` em um <xref:System.IO.Stream>; você pode optar por processar além do <xref:System.IO.Stream> antes de gravá-los no seu armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-176">You must call one of the overloaded <xref:System.Workflow.ComponentModel.Activity.Save%2A> methods to serialize `activity` into a <xref:System.IO.Stream>; you may then choose to additionally process the <xref:System.IO.Stream> before writing it to your data store.</span></span> <span data-ttu-id="d2db2-177">No entanto, quando o mecanismo de tempo de execução do fluxo de trabalho chama <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A>, você deve restaurar uma cópia idêntica da atividade.</span><span class="sxs-lookup"><span data-stu-id="d2db2-177">However, when the workflow runtime engine calls <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A>, you must restore an identical copy of the activity.</span></span>  
  
 <span data-ttu-id="d2db2-178">Você deve ser capaz de associar o escopo concluído com a instância de fluxo de trabalho delimitador para marcar o escopo como desnecessários no seu armazenamento de dados quando a instância de fluxo de trabalho é concluída ou é encerrado.</span><span class="sxs-lookup"><span data-stu-id="d2db2-178">You must be able to associate the completed scope with its enclosing workflow instance to mark the scope as unneeded in your data store when the workflow instance finishes or is terminated.</span></span> <span data-ttu-id="d2db2-179">Portanto, você também deve salvar o <xref:System.Guid> da instância do fluxo de trabalho que está associada com o escopo concluído; isso pode ser obtido a <xref:System.Workflow.Runtime.WorkflowInstance.InstanceId%2A> propriedade do <xref:System.Workflow.Runtime.WorkflowInstance> associado `activity`.</span><span class="sxs-lookup"><span data-stu-id="d2db2-179">Therefore, you should also save the <xref:System.Guid> of the workflow instance that is associated with the completed scope; this can be obtained from the <xref:System.Workflow.Runtime.WorkflowInstance.InstanceId%2A> property of the <xref:System.Workflow.Runtime.WorkflowInstance> associated with `activity`.</span></span>  
  
 <span data-ttu-id="d2db2-180"><xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A> leva o <xref:System.Guid> do escopo concluído como um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="d2db2-180"><xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadCompletedContextActivity%2A> takes the <xref:System.Guid> of the completed scope as a parameter.</span></span> <span data-ttu-id="d2db2-181">Portanto, você também deve salvar o <xref:System.Workflow.ComponentModel.ActivityExecutionContext.ContextGuid%2A> propriedade associada `activity`.</span><span class="sxs-lookup"><span data-stu-id="d2db2-181">Therefore, you must also save the <xref:System.Workflow.ComponentModel.ActivityExecutionContext.ContextGuid%2A> property associated with `activity`.</span></span> <span data-ttu-id="d2db2-182">Essa propriedade pode ser referenciada por meio de <xref:System.Workflow.ComponentModel.Activity.ActivityContextGuidProperty> campo de `activity`.</span><span class="sxs-lookup"><span data-stu-id="d2db2-182">This property can be referenced through the <xref:System.Workflow.ComponentModel.Activity.ActivityContextGuidProperty> field of `activity`.</span></span>  
  
 <span data-ttu-id="d2db2-183">Se você estiver implementando um serviço de persistência que usa um armazenamento durável, para manter a consistência com o estado interno do mecanismo de tempo de execução de fluxo de trabalho, você deve participar de transações de fluxo de trabalho em lotes para adiar a gravação real no seu repositório durável até um ponto de confirmação de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-183">If you are implementing a persistence service that uses a durable store, to maintain consistency with the internal state of the workflow runtime engine, you should participate in workflow transaction batching to defer the actual write to your durable store until a workflow commit point.</span></span> <span data-ttu-id="d2db2-184">Para participar de envio em lote, adicione um item de trabalho para o <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> propriedade que representa as alterações pendentes no banco de dados e implementar o <xref:System.Workflow.Runtime.IPendingWork> interface em seu serviço de persistência.</span><span class="sxs-lookup"><span data-stu-id="d2db2-184">To participate in batching, add a work item to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> property that represents the pending changes to the database, and implement the <xref:System.Workflow.Runtime.IPendingWork> interface in your persistence service.</span></span>  
  
 <span data-ttu-id="d2db2-185">Se você não pode salvar o escopo concluído para o armazenamento de dados, você deve lançar uma <xref:System.Workflow.Runtime.Hosting.PersistenceException> com uma mensagem de erro apropriada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-185">If you cannot save the completed scope to your data store, you should throw a <xref:System.Workflow.Runtime.Hosting.PersistenceException> with an appropriate error message.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="d2db2-186">O exemplo a seguir demonstra uma implementação do `SaveCompletedContextActivity` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-186">The following example demonstrates an implementation of the `SaveCompletedContextActivity` method.</span></span> <span data-ttu-id="d2db2-187">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-187">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-188">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-188">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#268](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#268)]
 [!code-vb[WF_Samples#268](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#268)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="SaveWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal abstract void SaveWorkflowInstanceState (System.Workflow.ComponentModel.Activity rootActivity, bool unlock);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance void SaveWorkflowInstanceState(class System.Workflow.ComponentModel.Activity rootActivity, bool unlock) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState(System.Workflow.ComponentModel.Activity,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend MustOverride Sub SaveWorkflowInstanceState (rootActivity As Activity, unlock As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract void SaveWorkflowInstanceState(System::Workflow::ComponentModel::Activity ^ rootActivity, bool unlock);" />
      <MemberSignature Language="F#" Value="abstract member SaveWorkflowInstanceState : System.Workflow.ComponentModel.Activity * bool -&gt; unit" Usage="workflowPersistenceService.SaveWorkflowInstanceState (rootActivity, unlock)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
        <Parameter Name="unlock" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="d2db2-189">A atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-189">The root activity of the workflow instance.</span>
          </span>
        </param>
        <param name="unlock">
          <span data-ttu-id="d2db2-190">
            <see langword="true" /> se a instância de fluxo de trabalho não deve ser bloqueada; <see langword="false" /> se a instância de fluxo de trabalho deve ser bloqueada.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-190">
              <see langword="true" /> if the workflow instance should not be locked; <see langword="false" /> if the workflow instance should be locked.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-191">Quando implementado em uma classe derivada, salva o estado da instância de fluxo de trabalho em um armazenamento de dados.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-191">When implemented in a derived class, saves the workflow instance state to a data store.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d2db2-192">Você deve chamar uma das sobrecarregado <xref:System.Workflow.ComponentModel.Activity.Save%2A> métodos para serializar `rootActivity` em um <xref:System.IO.Stream>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-192">You must call one of the overloaded <xref:System.Workflow.ComponentModel.Activity.Save%2A> methods to serialize `rootActivity` into a <xref:System.IO.Stream>.</span></span> <span data-ttu-id="d2db2-193">Você pode optar por processar adicionalmente o <xref:System.IO.Stream> antes de gravá-los no seu armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-193">You can then choose to additionally process the <xref:System.IO.Stream> before writing it to your data store.</span></span> <span data-ttu-id="d2db2-194">No entanto, quando o mecanismo de tempo de execução do fluxo de trabalho chama <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A>, você deve restaurar uma cópia idêntica da atividade raiz.</span><span class="sxs-lookup"><span data-stu-id="d2db2-194">However, when the workflow runtime engine calls <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A>, you must restore an identical copy of the root activity.</span></span> <span data-ttu-id="d2db2-195">Se você não pode salvar o estado da instância de fluxo de trabalho em seu armazenamento de dados, você deve lançar uma <xref:System.Workflow.Runtime.Hosting.PersistenceException> com uma mensagem de erro apropriada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-195">If you cannot save the workflow instance state to your data store, you should throw a <xref:System.Workflow.Runtime.Hosting.PersistenceException> with an appropriate error message.</span></span>  
  
 <span data-ttu-id="d2db2-196">O mecanismo de tempo de execução do fluxo de trabalho fornece a semântica de bloqueio para restringir o acesso a um estado de instância de fluxo de trabalho é salvo no repositório de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-196">The workflow runtime engine provides locking semantics to restrict access to a workflow instance state that is saved in the data store.</span></span> <span data-ttu-id="d2db2-197">Isso pode ser acessado pelos serviços em execução em vários hosts e apontando para o mesmo armazenamento de dados de persistência.</span><span class="sxs-lookup"><span data-stu-id="d2db2-197">This can be accessed by the persistence services running in multiple hosts and pointing to the same data store.</span></span> <span data-ttu-id="d2db2-198">A semântica de bloqueio é projetada para impedir que os serviços de persistência que são executados em dois tempos de execução do fluxo de trabalho diferente de carregar a mesma instância de fluxo de trabalho na memória ao mesmo tempo.</span><span class="sxs-lookup"><span data-stu-id="d2db2-198">The locking semantics are designed to prevent persistence services that run in two different workflow runtimes from loading the same workflow instance into memory at the same time.</span></span> <span data-ttu-id="d2db2-199">Dependendo do tipo de ambiente que seu serviço de persistência é projetado para dar suporte, você pode optar por dar suporte a essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="d2db2-199">Depending on the type of environment your persistence service is designed to support, you can choose whether to support this functionality.</span></span> <span data-ttu-id="d2db2-200">Se você optar por oferecer suporte a semântica de bloqueio de tempo de execução, então, se um serviço de persistência tenta salvar um estado de instância de fluxo de trabalho que foi bloqueado anteriormente por outro serviço de persistência, você deve lançar uma <xref:System.Workflow.Runtime.WorkflowOwnershipException>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-200">If you choose to support the runtime locking semantics, then, if a persistence service tries to save a workflow instance state that has been previously locked by another persistence service, you should throw a <xref:System.Workflow.Runtime.WorkflowOwnershipException>.</span></span> <span data-ttu-id="d2db2-201">Se `unlock` é `true`, você deve desbloquear o acesso para o estado da instância de fluxo de trabalho depois que você salvá-lo.</span><span class="sxs-lookup"><span data-stu-id="d2db2-201">If `unlock` is `true`, you should unlock access to the workflow instance state after you save it.</span></span>  
  
 <span data-ttu-id="d2db2-202"><xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A> leva o <xref:System.Guid> da instância do fluxo de trabalho como um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="d2db2-202"><xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.LoadWorkflowInstanceState%2A> takes the <xref:System.Guid> of the workflow instance as a parameter.</span></span> <span data-ttu-id="d2db2-203">Portanto, você deve salvar isso <xref:System.Guid>.</span><span class="sxs-lookup"><span data-stu-id="d2db2-203">Therefore, you should save this <xref:System.Guid>.</span></span> <span data-ttu-id="d2db2-204">Você também pode usar isso <xref:System.Guid> para associar a instância de fluxo de trabalho com os estados salvos de seus escopos concluídos.</span><span class="sxs-lookup"><span data-stu-id="d2db2-204">You can also use this <xref:System.Guid> to associate the workflow instance with the saved states of its completed scopes.</span></span> <span data-ttu-id="d2db2-205">Você deve fazer isso porque você deve poder marcar esses escopos concluídos como desnecessários quando a instância de fluxo de trabalho é concluída.</span><span class="sxs-lookup"><span data-stu-id="d2db2-205">You must do this because you must be able to mark these completed scopes as unneeded when the workflow instance completes.</span></span>  
  
 <span data-ttu-id="d2db2-206">A mecanismo de tempo de execução de fluxo de trabalho chama <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> uma última vez em que a instância de fluxo de trabalho é concluída ou terminada.</span><span class="sxs-lookup"><span data-stu-id="d2db2-206">The workflow runtime engine calls <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> a final time when the workflow instance is completed or terminated.</span></span> <span data-ttu-id="d2db2-207">Portanto, se <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetWorkflowStatus%2A> é igual a <xref:System.Workflow.Runtime.WorkflowStatus.Completed> ou <xref:System.Workflow.Runtime.WorkflowStatus.Terminated>, você pode excluir com segurança a instância de fluxo de trabalho e todos os seus escopos concluídos associados de seu armazenamento de dados.</span><span class="sxs-lookup"><span data-stu-id="d2db2-207">Therefore, if <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.GetWorkflowStatus%2A> is equal to <xref:System.Workflow.Runtime.WorkflowStatus.Completed> or <xref:System.Workflow.Runtime.WorkflowStatus.Terminated>, you can safely delete the workflow instance and all its associated completed scopes from your data store.</span></span> <span data-ttu-id="d2db2-208">Como alternativa, você pode se inscrever para o <xref:System.Workflow.Runtime.WorkflowRuntime.WorkflowCompleted> ou <xref:System.Workflow.Runtime.WorkflowRuntime.WorkflowTerminated> eventos para determinar quando é seguro excluir os registros associados com a instância de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-208">Alternatively, you can subscribe to the <xref:System.Workflow.Runtime.WorkflowRuntime.WorkflowCompleted> or <xref:System.Workflow.Runtime.WorkflowRuntime.WorkflowTerminated> events to determine when it is safe to delete records associated with the workflow instance.</span></span> <span data-ttu-id="d2db2-209">Se você realmente excluir os registros de seu armazenamento de dados depende de sua implementação.</span><span class="sxs-lookup"><span data-stu-id="d2db2-209">Whether you actually delete the records from your data store depends on your implementation.</span></span>  
  
 <span data-ttu-id="d2db2-210">Se você implementar um serviço de persistência que usa um armazenamento durável, então, para manter a consistência com o estado interno do mecanismo de tempo de execução de fluxo de trabalho, você deve participar de transações de fluxo de trabalho em lotes para adiar a gravação real no seu repositório durável até um ponto de confirmação de fluxo de trabalho.</span><span class="sxs-lookup"><span data-stu-id="d2db2-210">If you implement a persistence service that uses a durable store, then, to maintain consistency with the internal state of the workflow runtime engine, you should participate in workflow transaction batching to defer the actual write to your durable store until a workflow commit point.</span></span> <span data-ttu-id="d2db2-211">Para participar de envio em lote, adicione um item de trabalho que representa as alterações pendentes para o armazenamento durável para a <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> propriedade e implementar o <xref:System.Workflow.Runtime.IPendingWork> interface em seu serviço de persistência.</span><span class="sxs-lookup"><span data-stu-id="d2db2-211">To participate in batching, add a work item that represents the pending changes to your durable store to the <xref:System.Workflow.Runtime.WorkflowEnvironment.WorkBatch%2A> property, and implement the <xref:System.Workflow.Runtime.IPendingWork> interface in your persistence service.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="d2db2-212">O exemplo a seguir demonstra uma implementação do `SaveWorkflowInstanceState` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-212">The following example demonstrates an implementation of the `SaveWorkflowInstanceState` method.</span></span> <span data-ttu-id="d2db2-213">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-213">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-214">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-214">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#264](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#264)]
 [!code-vb[WF_Samples#264](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#264)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="UnloadOnIdle">
      <MemberSignature Language="C#" Value="protected internal abstract bool UnloadOnIdle (System.Workflow.ComponentModel.Activity activity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance bool UnloadOnIdle(class System.Workflow.ComponentModel.Activity activity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnloadOnIdle(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract bool UnloadOnIdle(System::Workflow::ComponentModel::Activity ^ activity);" />
      <MemberSignature Language="F#" Value="abstract member UnloadOnIdle : System.Workflow.ComponentModel.Activity -&gt; bool" Usage="workflowPersistenceService.UnloadOnIdle activity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="activity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="activity">
          <span data-ttu-id="d2db2-215">Uma <see cref="T:System.Workflow.ComponentModel.Activity" /> que representa o escopo concluído.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-215">An <see cref="T:System.Workflow.ComponentModel.Activity" /> that represents the completed scope.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-216">Determina se um fluxo de trabalho deve ser descarregado quando ocioso.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-216">Determines whether a workflow should be unloaded when idle.</span>
          </span>
        </summary>
        <returns>
          <span data-ttu-id="d2db2-217">Se <see langword="true" />, o mecanismo de tempo de execução de fluxo de trabalho descarrega o fluxo de trabalho especificado quando ele se torna ocioso.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-217">If <see langword="true" />, the workflow runtime engine unloads the specified workflow when it becomes idle.</span>
          </span>
        </returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Examples  
 <span data-ttu-id="d2db2-218">O exemplo a seguir demonstra uma implementação do `UnloadOnIdle` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-218">The following example demonstrates an implementation of the `UnloadOnIdle` method.</span></span> <span data-ttu-id="d2db2-219">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-219">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-220">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-220">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#270](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#270)]
 [!code-vb[WF_Samples#270](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#270)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="UnlockWorkflowInstanceState">
      <MemberSignature Language="C#" Value="protected internal abstract void UnlockWorkflowInstanceState (System.Workflow.ComponentModel.Activity rootActivity);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig newslot virtual instance void UnlockWorkflowInstanceState(class System.Workflow.ComponentModel.Activity rootActivity) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.UnlockWorkflowInstanceState(System.Workflow.ComponentModel.Activity)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend MustOverride Sub UnlockWorkflowInstanceState (rootActivity As Activity)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; abstract void UnlockWorkflowInstanceState(System::Workflow::ComponentModel::Activity ^ rootActivity);" />
      <MemberSignature Language="F#" Value="abstract member UnlockWorkflowInstanceState : System.Workflow.ComponentModel.Activity -&gt; unit" Usage="workflowPersistenceService.UnlockWorkflowInstanceState rootActivity" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Workflow.Runtime</AssemblyName>
        <AssemblyVersion>3.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="rootActivity" Type="System.Workflow.ComponentModel.Activity" />
      </Parameters>
      <Docs>
        <param name="rootActivity">
          <span data-ttu-id="d2db2-221">A atividade raiz da instância do fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-221">The root activity of the workflow instance.</span>
          </span>
        </param>
        <summary>
          <span data-ttu-id="d2db2-222">Quando substituído em uma classe derivada, desbloqueia o estado da instância de fluxo de trabalho.</span>
          <span class="sxs-lookup">
            <span data-stu-id="d2db2-222">When overridden in a derived class, unlocks the workflow instance state.</span>
          </span>
        </summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="d2db2-223">Esse método é abstrato, portanto, ele não contém uma implementação padrão no bloqueio e desbloqueio.</span><span class="sxs-lookup"><span data-stu-id="d2db2-223">This method is abstract, so it does not contain a default implementation on locking and unlocking.</span></span>  
  
 <span data-ttu-id="d2db2-224">Ao implementar um serviço de persistência personalizado, se você quiser implementar um esquema de bloqueio você precisará substituir esse método e fornecem um mecanismo de bloqueio de desbloqueio no <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> método com base no valor do parâmetro unlock.</span><span class="sxs-lookup"><span data-stu-id="d2db2-224">While implementing a custom persistence service, if you want to implement a locking scheme you will need to override this method and provide a locking-unlocking mechanism in the <xref:System.Workflow.Runtime.Hosting.WorkflowPersistenceService.SaveWorkflowInstanceState%2A> method based on the value of the unlock parameter.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="d2db2-225">O exemplo a seguir demonstra uma implementação do `UnlockWorkflowInstanceState` método.</span><span class="sxs-lookup"><span data-stu-id="d2db2-225">The following example demonstrates an implementation of the `UnlockWorkflowInstanceState` method.</span></span> <span data-ttu-id="d2db2-226">Este exemplo é do exemplo de serviço de persistência personalizado, do arquivo FilePersistenceService.cs.</span><span class="sxs-lookup"><span data-stu-id="d2db2-226">This example is from the Custom Persistence Service sample, from the FilePersistenceService.cs file.</span></span> <span data-ttu-id="d2db2-227">Para obter mais informações, consulte [exemplo de serviço de persistência personalizado](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span><span class="sxs-lookup"><span data-stu-id="d2db2-227">For more information, see [Custom Persistence Service Sample](http://msdn.microsoft.com/library/869dfadf-5298-4551-bc80-f4cf7918729d).</span></span>  
  
 [!code-csharp[WF_Samples#267](~/samples/snippets/csharp/VS_Snippets_CFX/wf_samples/cs/snippets24.cs#267)]
 [!code-vb[WF_Samples#267](~/samples/snippets/visualbasic/VS_Snippets_CFX/wf_samples/vb/snippets24.vb#267)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>