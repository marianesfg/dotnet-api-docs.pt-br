<Type Name="IEnlistmentNotification" FullName="System.Transactions.IEnlistmentNotification">
  <Metadata><Meta Name="ms.openlocfilehash" Value="515c5331c81a97a49b80dee630ada21a4e303897" /><Meta Name="ms.sourcegitcommit" Value="a3e01ec36374fac54a55add0dcc1e754e394abeb" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="pt-BR" /><Meta Name="ms.lasthandoff" Value="03/30/2019" /><Meta Name="ms.locfileid" Value="58696258" /></Metadata><TypeSignature Language="C#" Value="public interface IEnlistmentNotification" />
  <TypeSignature Language="ILAsm" Value=".class public interface auto ansi abstract IEnlistmentNotification" />
  <TypeSignature Language="DocId" Value="T:System.Transactions.IEnlistmentNotification" />
  <TypeSignature Language="VB.NET" Value="Public Interface IEnlistmentNotification" />
  <TypeSignature Language="C++ CLI" Value="public interface class IEnlistmentNotification" />
  <TypeSignature Language="F#" Value="type IEnlistmentNotification = interface" />
  <AssemblyInfo>
    <AssemblyName>System.Transactions</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Transactions.Local</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.1.0</AssemblyVersion>
  </AssemblyInfo>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="2eeec-101">Descreve uma interface que um gerenciador de recursos deve implementar para fornecer dois retornos de chamada de notificação de confirmação de fase para o gerenciador de transação após a inscrição para a participação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-101">Describes an interface that a resource manager should implement to provide two phase commit notification callbacks for the transaction manager upon enlisting for participation.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="2eeec-102">Em ordem de um Gerenciador de recursos para participar de uma transação, ele deve se inscrever na transação por meio do Gerenciador de transações.</span><span class="sxs-lookup"><span data-stu-id="2eeec-102">In order for a resource manager to participate in a transaction, it must enlist in the transaction through the transaction manager.</span></span> <span data-ttu-id="2eeec-103">O <xref:System.Transactions.Transaction> classe define um conjunto de métodos cujos nomes começam com `Enlist` que fornecem essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="2eeec-103">The <xref:System.Transactions.Transaction> class defines a set of methods whose names begin with `Enlist` that provide this functionality.</span></span> <span data-ttu-id="2eeec-104">Os diferentes `Enlist` métodos correspondem aos diferentes tipos de inscrição que um Gerenciador de recursos pode ter.</span><span class="sxs-lookup"><span data-stu-id="2eeec-104">The different `Enlist` methods correspond to the different types of enlistment that a resource maanger may have.</span></span>  
  
 <span data-ttu-id="2eeec-105">Esta classe descreve uma interface que um Gerenciador de recursos deve implementar para fornecer dois callbacks de notificação de confirmação de fase para o Gerenciador de transações após a inscrição para participação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-105">This class describes an interface that a resource manager should implement to provide two phase commit notification callbacks for the transaction manager upon enlisting for participation.</span></span> <span data-ttu-id="2eeec-106">Para a implementação do cada Gerenciador de recursos do <xref:System.Transactions.IEnlistmentNotification> interface, você deve inscrever usando o <xref:System.Transactions.Transaction.EnlistVolatile%2A> método ou o <xref:System.Transactions.Transaction.EnlistDurable%2A> método da <xref:System.Transactions.Transaction> classe, dependendo se o recurso for duráveis ou voláteis.</span><span class="sxs-lookup"><span data-stu-id="2eeec-106">For each resource manager's implementation of the <xref:System.Transactions.IEnlistmentNotification> interface, you should enlist it using the <xref:System.Transactions.Transaction.EnlistVolatile%2A> method or the <xref:System.Transactions.Transaction.EnlistDurable%2A> method of the <xref:System.Transactions.Transaction> class, depending on whether your resource is volatile or durable.</span></span> <span data-ttu-id="2eeec-107">Para obter mais informações sobre a inscrição e 2PC, consulte [inscrever-se a recursos como participantes em uma transação](~/docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) e [confirmando uma transação de fase única e várias fases](~/docs/framework/data/transactions/committing-a-transaction-in-single-phase-and-multi-phase.md) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="2eeec-107">For more information on enlistment and 2PC, see [Enlisting Resources as Participants in a Transaction](~/docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md) and [Committing a Transaction in Single-Phase and Multi-Phase](~/docs/framework/data/transactions/committing-a-transaction-in-single-phase-and-multi-phase.md) respectively.</span></span>  
  
 <span data-ttu-id="2eeec-108">O Gerenciador de transações notifica o objeto inscrito em diferentes fases do protocolo de confirmação de fase dois pelos seguintes métodos.</span><span class="sxs-lookup"><span data-stu-id="2eeec-108">The transaction manager notifies the enlisted object at different phases of the Two Phase Commit Protocol by the following methods.</span></span>  
  
|<span data-ttu-id="2eeec-109">Método</span><span class="sxs-lookup"><span data-stu-id="2eeec-109">Method</span></span>|<span data-ttu-id="2eeec-110">Descrição</span><span class="sxs-lookup"><span data-stu-id="2eeec-110">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Transactions.IEnlistmentNotification.Prepare%2A>|<span data-ttu-id="2eeec-111">Esse método de um objeto inscrito é usado como um retorno de chamada pelo Gerenciador de transações durante a primeira fase de uma transação, quando o Gerenciador de transações solicita que os participantes se eles podem confirmar a transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-111">This method of an enlisted object is used as a callback by the Transaction Manager during the first phase of a transaction, when the transaction manager asks participants whether they can commit the transaction.</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.Commit%2A>|<span data-ttu-id="2eeec-112">Esse método de um objeto inscrito é usado como um retorno de chamada pelo Gerenciador de transações durante a segunda fase de uma transação se a transação for confirmada.</span><span class="sxs-lookup"><span data-stu-id="2eeec-112">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is committed.</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.Rollback%2A>|<span data-ttu-id="2eeec-113">Esse método de um objeto inscrito é usado como um retorno de chamada pelo Gerenciador de transações durante a segunda fase de uma transação se a transação for anulada (isto é, revertida).</span><span class="sxs-lookup"><span data-stu-id="2eeec-113">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is aborted (that is, rolled back).</span></span>|  
|<xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>|<span data-ttu-id="2eeec-114">Esse método de um objeto inscrito é usado como um retorno de chamada pelo Gerenciador de transações durante a segunda fase de uma transação se a transação está em dúvida.</span><span class="sxs-lookup"><span data-stu-id="2eeec-114">This method of an enlisted object is used as a callback by the Transaction Manager during the second phase of a transaction if the transaction is in doubt.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="2eeec-115">Você deve estar ciente de que as notificações não podem ser enviadas em sequência ou em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="2eeec-115">You should be aware that notifications might not be sent sequentially, or in a particular order.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="2eeec-116">O exemplo a seguir mostra uma implementação dessa interface, bem como inscrever-se o objeto como um participante em uma transação usando o <xref:System.Transactions.Transaction.EnlistVolatile%2A> método.</span><span class="sxs-lookup"><span data-stu-id="2eeec-116">The following example shows an implementation of this interface, as well as enlisting the object as a participant in a transaction using the <xref:System.Transactions.Transaction.EnlistVolatile%2A> method.</span></span>  
  
 [!code-csharp[Tx_Enlist#1](~/samples/snippets/csharp/VS_Snippets_CFX/tx_enlist/cs/enlist.cs#1)]
 [!code-vb[Tx_Enlist#1](~/samples/snippets/visualbasic/VS_Snippets_CFX/tx_enlist/vb/enlist.vb#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="T:System.Transactions.ISinglePhaseNotification" />
    <related type="Article" href="https://msdn.microsoft.com/library/786a12c2-d530-49f4-9c59-5c973e15a11d"><span data-ttu-id="2eeec-117">Inscrever recursos como participantes em uma transação</span><span class="sxs-lookup"><span data-stu-id="2eeec-117">Enlisting Resources as Participants in a Transaction</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/694ea153-e4db-41ae-96ac-9ac66dcb69a9"><span data-ttu-id="2eeec-118">Confirmar uma transação de fase única e de várias fases</span><span class="sxs-lookup"><span data-stu-id="2eeec-118">Committing a Transaction in Single-Phase and Multi-Phase</span></span></related>
  </Docs>
  <Members>
    <Member MemberName="Commit">
      <MemberSignature Language="C#" Value="public void Commit (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Commit(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Commit(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Commit(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member Commit : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.Commit enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="2eeec-119">Um objeto <see cref="T:System.Transactions.Enlistment" /> usado para enviar uma resposta ao gerenciador de transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-119">An <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="2eeec-120">Notifica um objeto inscrito de que uma transação está sendo confirmada.</span><span class="sxs-lookup"><span data-stu-id="2eeec-120">Notifies an enlisted object that a transaction is being committed.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="2eeec-121">O Gerenciador de transações chama esse método de um objeto inscrito durante a segunda fase de um compromisso, quando ele instrui todos os participantes para confirmar a transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-121">The transaction manager calls this method of an enlisted object during the second phase of a commitment, when it instructs all participants to commit the transaction.</span></span>  
  
 <span data-ttu-id="2eeec-122">O Gerenciador de recursos deve executar qualquer trabalho necessário para concluir a transação e, em seguida, informar o TM concluiu chamando o <xref:System.Transactions.Enlistment.Done%2A> método no `enlistment` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="2eeec-122">The resource manager should perform any work necessary to finish the transaction and then inform the TM that it has finished by calling the <xref:System.Transactions.Enlistment.Done%2A> method on the `enlistment` parameter.</span></span>  
  
 <span data-ttu-id="2eeec-123">Se o Gerenciador de recursos foi inscrito permanentemente, mas não responde chamando <xref:System.Transactions.Enlistment.Done%2A> método, o Gerenciador de transações não tem certo de que o Gerenciador de recursos tenha recebido o <xref:System.Transactions.IEnlistmentNotification.Commit%2A> chamar.</span><span class="sxs-lookup"><span data-stu-id="2eeec-123">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.Commit%2A> call.</span></span> <span data-ttu-id="2eeec-124">Como tal, o Gerenciador de transações mantém aguardando uma resposta e mantém as informações relevantes para essa transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-124">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="2eeec-125">Se <xref:System.Transactions.Enlistment.Done%2A> é nunca é chamado, essa informação é mantida em torno de indefinidamente em memória ou em um recurso do sistema.</span><span class="sxs-lookup"><span data-stu-id="2eeec-125">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="2eeec-126">Isso resulta em recursos de não poder ser recuperada.</span><span class="sxs-lookup"><span data-stu-id="2eeec-126">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="2eeec-127">No caso de uma transação distribuída, isso eventualmente pode preencher o log MSDTC que para o processo do MSDTC.</span><span class="sxs-lookup"><span data-stu-id="2eeec-127">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="2eeec-128">No caso de uma transação gerenciada por <xref:System.Transactions>, isso resulta em um aumento gradual e contínuo no consumo de memória de processo do Gerenciador de recursos.</span><span class="sxs-lookup"><span data-stu-id="2eeec-128">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="2eeec-129">Portanto, é crucial chamar o <xref:System.Transactions.Enlistment.Done%2A> método depois que o Gerenciador de recursos é feito com seu trabalho de preparação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-129">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="InDoubt">
      <MemberSignature Language="C#" Value="public void InDoubt (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void InDoubt(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.InDoubt(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void InDoubt(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member InDoubt : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.InDoubt enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="2eeec-130">Um objeto <see cref="T:System.Transactions.Enlistment" /> usado para enviar uma resposta ao gerenciador de transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-130">An <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="2eeec-131">Notifica um objeto inscrito de que o status de uma transação está duvidoso.</span><span class="sxs-lookup"><span data-stu-id="2eeec-131">Notifies an enlisted object that the status of a transaction is in doubt.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="2eeec-132">Esse método é chamado para recursos voláteis, quando o Gerenciador de transações foi invocado em uma operação de confirmação de fase única para um único recurso durável e, em seguida, a conexão para o recurso durável foi perdida antes de obter o resultado da transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-132">This method is called for volatile resources when the transaction manager has invoked a single phase commit operation to a single durable resource, and then connection to the durable resource was lost prior to getting the transaction result.</span></span> <span data-ttu-id="2eeec-133">Nesse ponto, o resultado da transação não pode ser determinado com segurança.</span><span class="sxs-lookup"><span data-stu-id="2eeec-133">At that point, the transaction outcome cannot be safely determined.</span></span>  
  
 <span data-ttu-id="2eeec-134">Como <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> é considerado um estado final de uma transação, você não deve chamar <xref:System.Transactions.IEnlistmentNotification.Commit%2A> ou <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> depois de chamar <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>.</span><span class="sxs-lookup"><span data-stu-id="2eeec-134">As <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> is considered to be a final state for a transaction, you should not call <xref:System.Transactions.IEnlistmentNotification.Commit%2A> or <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> after calling <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2eeec-135">A implementação desse método para o recurso volátil deve executar qualquer operação de recuperação ou confinamento ele compreende sobre os dados afetados.</span><span class="sxs-lookup"><span data-stu-id="2eeec-135">Your implementation of this method for the volatile resource should perform whatever recovery or containment operation it understands on the affected data.</span></span>  <span data-ttu-id="2eeec-136">Também deve chamar o <xref:System.Transactions.Enlistment.Done%2A> método nas no `enlistment` parâmetro quando tiver concluído seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="2eeec-136">It must also call the <xref:System.Transactions.Enlistment.Done%2A> method on the on the `enlistment` parameter when it has finished its work.</span></span>  
  
 <span data-ttu-id="2eeec-137">Se o Gerenciador de recursos foi inscrito permanentemente, mas não responde chamando <xref:System.Transactions.Enlistment.Done%2A> método, o Gerenciador de transações não tem certo de que o Gerenciador de recursos tenha recebido o <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> chamar.</span><span class="sxs-lookup"><span data-stu-id="2eeec-137">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.InDoubt%2A> call.</span></span> <span data-ttu-id="2eeec-138">Como tal, o Gerenciador de transações mantém aguardando uma resposta e mantém as informações relevantes para essa transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-138">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="2eeec-139">Se <xref:System.Transactions.Enlistment.Done%2A> é nunca é chamado, essa informação é mantida em torno de indefinidamente em memória ou em um recurso do sistema.</span><span class="sxs-lookup"><span data-stu-id="2eeec-139">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="2eeec-140">Isso resulta em recursos de não poder ser recuperada.</span><span class="sxs-lookup"><span data-stu-id="2eeec-140">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="2eeec-141">No caso de uma transação distribuída, isso eventualmente pode preencher o log MSDTC que para o processo do MSDTC.</span><span class="sxs-lookup"><span data-stu-id="2eeec-141">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="2eeec-142">No caso de uma transação gerenciada por <xref:System.Transactions>, isso resulta em um aumento gradual e contínuo no consumo de memória de processo do Gerenciador de recursos.</span><span class="sxs-lookup"><span data-stu-id="2eeec-142">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="2eeec-143">Portanto, é crucial chamar o <xref:System.Transactions.Enlistment.Done%2A> método depois que o Gerenciador de recursos é feito com seu trabalho de preparação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-143">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Prepare">
      <MemberSignature Language="C#" Value="public void Prepare (System.Transactions.PreparingEnlistment preparingEnlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Prepare(class System.Transactions.PreparingEnlistment preparingEnlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Prepare(System.Transactions.PreparingEnlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Prepare(System::Transactions::PreparingEnlistment ^ preparingEnlistment);" />
      <MemberSignature Language="F#" Value="abstract member Prepare : System.Transactions.PreparingEnlistment -&gt; unit" Usage="iEnlistmentNotification.Prepare preparingEnlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="preparingEnlistment" Type="System.Transactions.PreparingEnlistment" />
      </Parameters>
      <Docs>
        <param name="preparingEnlistment"><span data-ttu-id="2eeec-144">Um objeto <see cref="T:System.Transactions.PreparingEnlistment" /> usado para enviar uma resposta para o gerenciador de transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-144">A <see cref="T:System.Transactions.PreparingEnlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="2eeec-145">Notifica um objeto inscrito de que uma transação está sendo preparada para confirmação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-145">Notifies an enlisted object that a transaction is being prepared for commitment.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="2eeec-146">O Gerenciador de transações chama esse método de um recurso inscrito manager durante a fase 1 de um compromisso, quando ele solicita que os participantes se eles podem confirmar a transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-146">The transaction manager calls this method of an enlisted resource manager during the phase 1 of a commitment, when it asks participants whether they can commit the transaction.</span></span>  
  
 <span data-ttu-id="2eeec-147">Quando você estiver implementando um resource manager durável, você deve registrar seu preparar o registro durante essa fase.</span><span class="sxs-lookup"><span data-stu-id="2eeec-147">When you are implementing a durable resource manager, you should log your prepare record during this phase.</span></span> <span data-ttu-id="2eeec-148">O registro deve conter todas as informações necessárias para executar a recuperação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-148">The record should contain all the necessary information to perform recovery.</span></span> <span data-ttu-id="2eeec-149">Isso inclui o <xref:System.Transactions.PreparingEnlistment.RecoveryInformation%2A> propriedade, que é passada para o Gerenciador de transações no <xref:System.Transactions.TransactionManager.Reenlist%2A> método durante a recuperação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-149">This includes the <xref:System.Transactions.PreparingEnlistment.RecoveryInformation%2A> property, which is passed to the transaction manager in the <xref:System.Transactions.TransactionManager.Reenlist%2A> method during recovery.</span></span> <span data-ttu-id="2eeec-150">Para obter mais informações sobre a recuperação, consulte [realizar recuperação](https://msdn.microsoft.com/library/d342c5c7-da64-4a4c-8e63-b52f4fbf2691).</span><span class="sxs-lookup"><span data-stu-id="2eeec-150">For more information on recovery, see [Performing Recovery](https://msdn.microsoft.com/library/d342c5c7-da64-4a4c-8e63-b52f4fbf2691).</span></span>  
  
 <span data-ttu-id="2eeec-151">O Gerenciador de recursos deve concluir todo o trabalho que deve ser concluído antes de chamar o <xref:System.Transactions.PreparingEnlistment.Prepared%2A> método da `preparingEnlistment` parâmetro para indicar o voto de compromisso.</span><span class="sxs-lookup"><span data-stu-id="2eeec-151">Your resource manager should complete all work that must be finished before calling the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> method of the `preparingEnlistment` parameter to indicate its vote for commitment.</span></span> <span data-ttu-id="2eeec-152">Você deve certificar-se de que isso é feito antes de receber qualquer notificação de fase 2 tal como confirmação, reversão ou em dúvida.</span><span class="sxs-lookup"><span data-stu-id="2eeec-152">You should make sure that this is accomplished before receiving any phase 2 notification such as commit, rollback or in doubt.</span></span> <span data-ttu-id="2eeec-153">Isso ocorre porque as notificações de fase 2 podem acontecer embutido no mesmo thread que chamou o <xref:System.Transactions.PreparingEnlistment.Prepared%2A> método na fase 1.</span><span class="sxs-lookup"><span data-stu-id="2eeec-153">This is because phase 2 notifications can happen inline on the same thread that called the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> method in phase 1.</span></span> <span data-ttu-id="2eeec-154">Assim, você não deve fazer qualquer trabalho após o <xref:System.Transactions.PreparingEnlistment.Prepared%2A> chamada (por exemplo, liberar bloqueios) que você esperaria ter concluído antes de receber as notificações de fase 2.</span><span class="sxs-lookup"><span data-stu-id="2eeec-154">As such, you should not do any work after the <xref:System.Transactions.PreparingEnlistment.Prepared%2A> call (for example, releasing locks) that you would expect to have completed before receiving the phase 2 notifications.</span></span>  
  
 <span data-ttu-id="2eeec-155">Você também pode chamar o método da `preparingEnlistment` parâmetro para indicar um voto para reversão.</span><span class="sxs-lookup"><span data-stu-id="2eeec-155">You can also call the method of the `preparingEnlistment` parameter to indicate a vote for rollback.</span></span>  
  
 <span data-ttu-id="2eeec-156">Se você quiser que o objeto simplesmente observar e reagir ao progresso da transação, sem a participação nele, sua implementação deste método deve chamar o <xref:System.Transactions.Enlistment.Done%2A> método da `preparingEnlistment` parâmetro quando tiver concluído seu trabalho.</span><span class="sxs-lookup"><span data-stu-id="2eeec-156">If you want the object to merely observe and react to the progress of the transaction, without participating in it, your implementation of this method should call the <xref:System.Transactions.Enlistment.Done%2A> method of the `preparingEnlistment` parameter when it has finished its work.</span></span> <span data-ttu-id="2eeec-157">Ao fazer isso, seu Gerenciador de recursos não receberia qualquer notificação de fase 2.</span><span class="sxs-lookup"><span data-stu-id="2eeec-157">By doing so, your resource manager would not receive any phase 2 notification.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="Rollback">
      <MemberSignature Language="C#" Value="public void Rollback (System.Transactions.Enlistment enlistment);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig newslot virtual instance void Rollback(class System.Transactions.Enlistment enlistment) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Transactions.IEnlistmentNotification.Rollback(System.Transactions.Enlistment)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void Rollback(System::Transactions::Enlistment ^ enlistment);" />
      <MemberSignature Language="F#" Value="abstract member Rollback : System.Transactions.Enlistment -&gt; unit" Usage="iEnlistmentNotification.Rollback enlistment" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Transactions</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Transactions.Local</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="enlistment" Type="System.Transactions.Enlistment" />
      </Parameters>
      <Docs>
        <param name="enlistment"><span data-ttu-id="2eeec-158">Um objeto <see cref="T:System.Transactions.Enlistment" /> usado para enviar uma resposta para o gerenciador de transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-158">A <see cref="T:System.Transactions.Enlistment" /> object used to send a response to the transaction manager.</span></span></param>
        <summary><span data-ttu-id="2eeec-159">Notifica um objeto inscrito de que uma transação está sendo revertida (anulada).</span><span class="sxs-lookup"><span data-stu-id="2eeec-159">Notifies an enlisted object that a transaction is being rolled back (aborted).</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="2eeec-160">O Gerenciador de transações chama esse método de um objeto inscrito de quando a transação está sendo revertida (anulada) devido à incapacidade de um ou mais participantes da transação para confirmar a transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-160">The transaction manager calls this method of an enlisted object when the transaction is being rolled back (aborted) due to the inability of one or more transaction participants to commit the transaction.</span></span>  
  
 <span data-ttu-id="2eeec-161">O Gerenciador de recursos deve executar qualquer trabalho necessário para concluir a transação e, em seguida, informar o TM concluiu chamando o <xref:System.Transactions.Enlistment.Done%2A> método no `enlistment` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="2eeec-161">The resource manager should perform any work necessary to finish the transaction and then inform the TM that it has finished by calling the <xref:System.Transactions.Enlistment.Done%2A> method on the `enlistment` parameter.</span></span>  
  
 <span data-ttu-id="2eeec-162">Se o Gerenciador de recursos foi inscrito permanentemente, mas não responde chamando <xref:System.Transactions.Enlistment.Done%2A> método, o Gerenciador de transações não tem certo de que o Gerenciador de recursos tenha recebido o <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> chamar.</span><span class="sxs-lookup"><span data-stu-id="2eeec-162">If the resource manager has enlisted durably, but does not respond by calling <xref:System.Transactions.Enlistment.Done%2A> method, the transaction manager is unsure that the resource manager has received the <xref:System.Transactions.IEnlistmentNotification.Rollback%2A> call.</span></span> <span data-ttu-id="2eeec-163">Como tal, o Gerenciador de transações mantém aguardando uma resposta e mantém as informações relevantes para essa transação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-163">As such, the transaction manager keeps waiting for a response, and maintains information relevant to this transaction.</span></span>  <span data-ttu-id="2eeec-164">Se <xref:System.Transactions.Enlistment.Done%2A> é nunca é chamado, essa informação é mantida em torno de indefinidamente em memória ou em um recurso do sistema.</span><span class="sxs-lookup"><span data-stu-id="2eeec-164">If <xref:System.Transactions.Enlistment.Done%2A> is never called, this piece of information is kept around indefinitely in memory or in a system-wide resource.</span></span> <span data-ttu-id="2eeec-165">Isso resulta em recursos de não poder ser recuperada.</span><span class="sxs-lookup"><span data-stu-id="2eeec-165">This results in resources not being able to be reclaimed.</span></span> <span data-ttu-id="2eeec-166">No caso de uma transação distribuída, isso eventualmente pode preencher o log MSDTC que para o processo do MSDTC.</span><span class="sxs-lookup"><span data-stu-id="2eeec-166">In the case of a distributed transaction, this could eventually fill the MSDTC log which halts the MSDTC process.</span></span> <span data-ttu-id="2eeec-167">No caso de uma transação gerenciada por <xref:System.Transactions>, isso resulta em um aumento gradual e contínuo no consumo de memória de processo do Gerenciador de recursos.</span><span class="sxs-lookup"><span data-stu-id="2eeec-167">In the case of a transaction managed by <xref:System.Transactions>, this results in a gradual and continual increase in the memory consumption of the resource manager's process.</span></span> <span data-ttu-id="2eeec-168">Portanto, é crucial chamar o <xref:System.Transactions.Enlistment.Done%2A> método depois que o Gerenciador de recursos é feito com seu trabalho de preparação.</span><span class="sxs-lookup"><span data-stu-id="2eeec-168">Therefore, it is crucial that you call the <xref:System.Transactions.Enlistment.Done%2A> method once your resource manager is done with your prepare work.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
  </Members>
</Type>